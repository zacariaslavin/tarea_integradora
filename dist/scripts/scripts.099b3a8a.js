function loadData(a,b,c,d){if(!window.MDUYT_CONFIG)throw"Archivo de configuración inexistente";var e,f=b.defer(),g=function(a){e=window.MDUYT_CONFIG.LOAD_USING_JSONP?a.data:"andino-json-api"===window.MDUYT_CONFIG.DATA_ORIGIN?a.data.result.records:Papa.parse(a.data,{header:!0}).data,e=e.map(function(a,b){return cleanData(a,b,d)}),f.resolve(e)},h=function(a){e=a,f.reject(a)},i=a.trustAsResourceUrl(window.MDUYT_CONFIG.DATA_PATH);return window.MDUYT_CONFIG.LOAD_USING_JSONP?c.jsonp(i).then(g,h):c.get(i).then(g,h),f.promise}function fetchId(a){var b=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,c=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,d=(a.match(c),a.match(b));if(null!==d){var e=d[1];return e}}function getYoutubePic(a){var b=fetchId(a);return"https://img.youtube.com/vi/"+b+"/hqdefault.jpg;"}d3.sankey=function(){function a(){n.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),o.forEach(function(a){var b=a.source,c=a.target;"number"==typeof b&&(b=a.source=n[a.source]),"number"==typeof c&&(c=a.target=n[a.target]),b.sourceLinks.push(a),c.targetLinks.push(a)})}function b(){n.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,i),d3.sum(a.targetLinks,i))})}function c(){for(var a,b=n,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=k,b.sourceLinks.forEach(function(b){a.push(b.target)})}),b=a,++c;d(c),e((m[0]-k)/(c-1))}function d(a){n.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function e(a){n.forEach(function(b){b.x*=a})}function f(a){function b(){var a=d3.min(g,function(a){return(m[1]-(a.length-1)*l)/d3.sum(a,i)});g.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),o.forEach(function(b){b.dy=b.value*a})}function c(a){function b(a){return h(a.source)*a.value}g.forEach(function(c,d){c.forEach(function(c){if(c.targetLinks.length){var d=d3.sum(c.targetLinks,b)/d3.sum(c.targetLinks,i);c.y+=(d-h(c))*a}})})}function d(a){function b(a){return h(a.target)*a.value}g.slice().reverse().forEach(function(c){c.forEach(function(c){if(c.sourceLinks.length){var d=d3.sum(c.sourceLinks,b)/d3.sum(c.sourceLinks,i);c.y+=(d-h(c))*a}})})}function e(){g.forEach(function(a){var b,c,d,e=0,g=a.length;for(a.sort(f),d=0;g>d;++d)b=a[d],c=e-b.y,c>0&&(b.y+=c),e=b.y+b.dy+l;if(c=e-l-m[1],c>0)for(e=b.y-=c,d=g-2;d>=0;--d)b=a[d],c=b.y+b.dy+l-e,c>0&&(b.y-=c),e=b.y})}function f(a,b){return a.y-b.y}var g=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(n).map(function(a){return a.values});b(),e();for(var j=1;a>0;--a)d(j*=.99),e(),c(j),e()}function g(){function a(a,b){return a.source.y-b.source.y}function b(a,b){return a.target.y-b.target.y}n.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),n.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function h(a){return a.y+a.dy/2}function i(a){return a.value}var j={},k=24,l=8,m=[1,1],n=[],o=[];return j.nodeWidth=function(a){return arguments.length?(k=+a,j):k},j.nodePadding=function(a){return arguments.length?(l=+a,j):l},j.nodes=function(a){return arguments.length?(n=a,j):n},j.links=function(a){return arguments.length?(o=a,j):o},j.size=function(a){return arguments.length?(m=a,j):m},j.layout=function(d){return a(),b(),c(),f(d),g(),j},j.relayout=function(){return g(),j},j.link=function(){function a(a){var c=a.source.x+a.source.dx,d=a.target.x,e=d3.interpolateNumber(c,d),f=e(b),g=e(1-b),h=a.source.y+a.sy+a.dy/2,i=a.target.y+a.ty+a.dy/2;return"M"+c+","+h+"C"+f+","+h+" "+g+","+i+" "+d+","+i}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},j},Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&"undefined"!=typeof exports?module.exports=b():a.Papa=b()}(this,function(){"use strict";function a(a){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var b=m(a);b.chunkSize=parseInt(b.chunkSize),a.step||a.chunk||(b.chunkSize=null),this._handle=new g(b),(this._handle.streamer=this)._config=b}.call(this,a),this.parseChunk=function(a,b){if(this.isFirstChunk&&o(this._config.beforeFirstChunk)){var c=this._config.beforeFirstChunk(a);void 0!==c&&(a=c)}this.isFirstChunk=!1;var d=this._partialLine+a;this._partialLine="";var e=this._handle.parse(d,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var f=e.meta.cursor;this._finished||(this._partialLine=d.substring(f-this._baseIndex),this._baseIndex=f),e&&e.data&&(this._rowCount+=e.data.length);var g=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(t)r.postMessage({results:e,workerId:x.WORKER_ID,finished:g});else if(o(this._config.chunk)&&!b){if(this._config.chunk(e,this._handle),this._handle.paused()||this._handle.aborted())return;e=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(e.data),this._completeResults.errors=this._completeResults.errors.concat(e.errors),this._completeResults.meta=e.meta),this._completed||!g||!o(this._config.complete)||e&&e.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),g||e&&e.meta.paused||this._nextChunk(),e}},this._sendError=function(a){o(this._config.error)?this._config.error(a):t&&this._config.error&&r.postMessage({workerId:x.WORKER_ID,error:a,finished:!1})}}function b(b){var c;(b=b||{}).chunkSize||(b.chunkSize=x.RemoteChunkSize),a.call(this,b),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(a){this._input=a,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),s||(c.onload=n(this._chunkLoaded,this),c.onerror=n(this._chunkError,this)),c.open("GET",this._input,!s),this._config.downloadRequestHeaders){var a=this._config.downloadRequestHeaders;for(var b in a)c.setRequestHeader(b,a[b])}if(this._config.chunkSize){var d=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+d),c.setRequestHeader("If-None-Match","webkit-no-cache")}try{c.send()}catch(a){this._chunkError(a.message)}s&&0===c.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){4===c.readyState&&(c.status<200||400<=c.status?this._chunkError():(this._finished=!this._config.chunkSize||this._start>function(a){var b=a.getResponseHeader("Content-Range");return null===b?-1:parseInt(b.substr(b.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(a){var b=c.statusText||a;this._sendError(new Error(b))}}function c(b){var c,d;(b=b||{}).chunkSize||(b.chunkSize=x.LocalChunkSize),a.call(this,b);var e="undefined"!=typeof FileReader;this.stream=function(a){this._input=a,d=a.slice||a.webkitSlice||a.mozSlice,e?((c=new FileReader).onload=n(this._chunkLoaded,this),c.onerror=n(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var a=this._input;if(this._config.chunkSize){var b=Math.min(this._start+this._config.chunkSize,this._input.size);a=d.call(a,this._start,b)}var f=c.readAsText(a,this._config.encoding);e||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(a){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(a.target.result)},this._chunkError=function(){this._sendError(c.error)}}function d(b){var c;a.call(this,b=b||{}),this.stream=function(a){return c=a,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var a=this._config.chunkSize,b=a?c.substr(0,a):c;return c=a?c.substr(a):"",this._finished=!c,this.parseChunk(b)}}}function e(b){a.call(this,b=b||{});var c=[],d=!0,e=!1;this.pause=function(){a.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){a.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(a){this._input=a,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){e&&1===c.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):d=!0},this._streamData=n(function(a){try{c.push("string"==typeof a?a:a.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(a){this._streamError(a)}},this),this._streamError=n(function(a){this._streamCleanUp(),this._sendError(a)},this),this._streamEnd=n(function(){this._streamCleanUp(),e=!0,this._streamData("")},this),this._streamCleanUp=n(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(b){var c=require("stream").Duplex,d=m(b),e=!0,f=!1,g=[],h=null;this._onCsvData=function(a){for(var b=a.data,c=0;c<b.length;c++)h.push(b[c])||this._handle.paused()||this._handle.pause()},this._onCsvComplete=function(){h.push(null)},d.step=n(this._onCsvData,this),d.complete=n(this._onCsvComplete,this),a.call(this,d),this._nextChunk=function(){f&&1===g.length&&(this._finished=!0),g.length?g.shift()():e=!0},this._addToParseQueue=function(a,b){g.push(n(function(){return this.parseChunk("string"==typeof a?a:a.toString(d.encoding)),o(b)?b():void 0},this)),e&&(e=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(a,b,c){this._addToParseQueue(a,c)},this._onWriteComplete=function(){f=!0,this._addToParseQueue("")},this.getStream=function(){return h},(h=new c({readableObjectMode:!0,decodeStrings:!1,read:n(this._onRead,this),write:n(this._onWrite,this)})).once("finish",n(this._onWriteComplete,this))}function g(a){function b(b){return"greedy"===a.skipEmptyLines?""===b.join("").trim():1===b.length&&0===b[0].length}function c(){if(v&&k&&(f("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),k=!1),a.skipEmptyLines)for(var c=0;c<v.data.length;c++)b(v.data[c])&&v.data.splice(c--,1);return d()&&function(){if(v){for(var b=0;d()&&b<v.data.length;b++)for(var c=0;c<v.data[b].length;c++){var e=v.data[b][c];a.trimHeaders&&(e=e.trim()),u.push(e)}v.data.splice(0,1)}}(),function(){if(!v||!a.header&&!a.dynamicTyping&&!a.transform)return v;for(var b=0;b<v.data.length;b++){var c,d=a.header?{}:[];for(c=0;c<v.data[b].length;c++){var g=c,h=v.data[b][c];a.header&&(g=c>=u.length?"__parsed_extra":u[c]),a.transform&&(h=a.transform(h,g)),h=e(g,h),"__parsed_extra"===g?(d[g]=d[g]||[],d[g].push(h)):d[g]=h}v.data[b]=d,a.header&&(c>u.length?f("FieldMismatch","TooManyFields","Too many fields: expected "+u.length+" fields but parsed "+c,r+b):c<u.length&&f("FieldMismatch","TooFewFields","Too few fields: expected "+u.length+" fields but parsed "+c,r+b))}return a.header&&v.meta&&(v.meta.fields=u),r+=v.data.length,v}()}function d(){return a.header&&0===u.length}function e(b,c){return d=b,a.dynamicTypingFunction&&void 0===a.dynamicTyping[d]&&(a.dynamicTyping[d]=a.dynamicTypingFunction(d)),!0===(a.dynamicTyping[d]||a.dynamicTyping)?"true"===c||"TRUE"===c||"false"!==c&&"FALSE"!==c&&(l.test(c)?parseFloat(c):n.test(c)?new Date(c):""===c?null:c):c;var d}function f(a,b,c,d){v.errors.push({type:a,code:b,message:c,row:d})}var g,j,k,l=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,n=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,p=this,q=0,r=0,s=!1,t=!1,u=[],v={data:[],errors:[],meta:{}};if(o(a.step)){var w=a.step;a.step=function(b){if(v=b,d())c();else{if(c(),0===v.data.length)return;q+=b.data.length,a.preview&&q>a.preview?j.abort():w(v,p)}}}this.parse=function(d,e,f){var l=a.quoteChar||'"';if(a.newline||(a.newline=function(a,b){a=a.substr(0,1048576);var c=new RegExp(h(b)+"([^]*?)"+h(b),"gm"),d=(a=a.replace(c,"")).split("\r"),e=a.split("\n"),f=1<e.length&&e[0].length<d[0].length;if(1===d.length||f)return"\n";for(var g=0,i=0;i<d.length;i++)"\n"===d[i][0]&&g++;return g>=d.length/2?"\r\n":"\r"}(d,l)),k=!1,a.delimiter)o(a.delimiter)&&(a.delimiter=a.delimiter(d),v.meta.delimiter=a.delimiter);else{var n=function(c,d,e,f){for(var g,h,j,k=[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP],l=0;l<k.length;l++){var m=k[l],n=0,o=0,p=0;j=void 0;for(var q=new i({comments:f,delimiter:m,newline:d,preview:10}).parse(c),r=0;r<q.data.length;r++)if(e&&b(q.data[r]))p++;else{var s=q.data[r].length;o+=s,void 0!==j?s>1&&(n+=Math.abs(s-j),j=s):j=s}0<q.data.length&&(o/=q.data.length-p),(void 0===h||h>n)&&o>1.99&&(h=n,g=m)}return{successful:!!(a.delimiter=g),bestDelimiter:g}}(d,a.newline,a.skipEmptyLines,a.comments);n.successful?a.delimiter=n.bestDelimiter:(k=!0,a.delimiter=x.DefaultDelimiter),v.meta.delimiter=a.delimiter}var p=m(a);return a.preview&&a.header&&p.preview++,g=d,j=new i(p),v=j.parse(g,e,f),c(),s?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return s},this.pause=function(){s=!0,j.abort(),g=g.substr(j.getCharIndex())},this.resume=function(){s=!1,p.streamer.parseChunk(g,!0)},this.aborted=function(){return t},this.abort=function(){t=!0,j.abort(),v.meta.aborted=!0,o(a.complete)&&a.complete(v),g=""}}function h(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(a){var b,c=(a=a||{}).delimiter,d=a.newline,e=a.comments,f=a.step,g=a.preview,h=a.fastMode,i=b=void 0===a.quoteChar?'"':a.quoteChar;if(void 0!==a.escapeChar&&(i=a.escapeChar),("string"!=typeof c||-1<x.BAD_DELIMITERS.indexOf(c))&&(c=","),e===c)throw"Comment character same as delimiter";!0===e?e="#":("string"!=typeof e||-1<x.BAD_DELIMITERS.indexOf(e))&&(e=!1),"\n"!==d&&"\r"!==d&&"\r\n"!==d&&(d="\n");var j=0,k=!1;this.parse=function(a,l,m){function n(a){z.push(a),C=j}function p(b){var c=0;if(-1!==b){var d=a.substring(F+1,b);d&&""===d.trim()&&(c=d.length)}return c}function q(b){return m||(void 0===b&&(b=a.substr(j)),B.push(b),j=u,n(B),y&&t()),s()}function r(b){j=b,n(B),B=[],H=a.indexOf(d,j)}function s(a){return{data:z,errors:A,meta:{delimiter:c,linebreak:d,aborted:k,truncated:!!a,cursor:C+(l||0)}}}function t(){f(s()),z=[],A=[]}if("string"!=typeof a)throw"Input must be a string";var u=a.length,v=c.length,w=d.length,x=e.length,y=o(f),z=[],A=[],B=[],C=j=0;if(!a)return s();if(h||!1!==h&&-1===a.indexOf(b)){for(var D=a.split(d),E=0;E<D.length;E++){if(B=D[E],j+=B.length,E!==D.length-1)j+=d.length;else if(m)return s();if(!e||B.substr(0,x)!==e){if(y){if(z=[],n(B.split(c)),t(),k)return s()}else n(B.split(c));if(g&&E>=g)return z=z.slice(0,g),s(!0)}}return s()}for(var F,G=a.indexOf(c,j),H=a.indexOf(d,j),I=new RegExp(i.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")+b,"g");;)if(a[j]!==b)if(e&&0===B.length&&a.substr(j,x)===e){if(-1===H)return s();j=H+w,H=a.indexOf(d,j),G=a.indexOf(c,j)}else if(-1!==G&&(H>G||-1===H))B.push(a.substring(j,G)),j=G+v,G=a.indexOf(c,j);else{if(-1===H)break;if(B.push(a.substring(j,H)),r(H+w),y&&(t(),k))return s();if(g&&z.length>=g)return s(!0)}else for(F=j,j++;;){if(-1===(F=a.indexOf(b,F+1)))return m||A.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:z.length,index:j}),q();if(F===u-1)return q(a.substring(j,F).replace(I,b));if(b!==i||a[F+1]!==i){if(b===i||0===F||a[F-1]!==i){var J=p(-1===H?G:Math.min(G,H));if(a[F+1+J]===c){B.push(a.substring(j,F).replace(I,b)),j=F+1+J+v,G=a.indexOf(c,j),H=a.indexOf(d,j);break}var K=p(H);if(a.substr(F+1+K,w)===d){if(B.push(a.substring(j,F).replace(I,b)),r(F+1+K+w),G=a.indexOf(c,j),y&&(t(),k))return s();if(g&&z.length>=g)return s(!0);break}A.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:z.length,index:j}),F++}}else F++}return q()},this.abort=function(){k=!0},this.getCharIndex=function(){return j}}function j(a){var b=a.data,c=v[b.workerId],d=!1;if(b.error)c.userError(b.error,b.file);else if(b.results&&b.results.data){var e={abort:function(){d=!0,k(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:l,resume:l};if(o(c.userStep)){for(var f=0;f<b.results.data.length&&(c.userStep({data:[b.results.data[f]],errors:b.results.errors,meta:b.results.meta},e),!d);f++);delete b.results}else o(c.userChunk)&&(c.userChunk(b.results,e,b.file),delete b.results)}b.finished&&!d&&k(b.workerId,b.results)}function k(a,b){var c=v[a];o(c.userComplete)&&c.userComplete(b),c.terminate(),delete v[a]}function l(){throw"Not implemented."}function m(a){if("object"!=typeof a||null===a)return a;var b=Array.isArray(a)?[]:{};for(var c in a)b[c]=m(a[c]);return b}function n(a,b){return function(){a.apply(b,arguments)}}function o(a){return"function"==typeof a}var p,q,r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:{},s=!r.document&&!!r.postMessage,t=s&&/(\?|&)papaworker(=|&|$)/.test(r.location.search),u=!1,v={},w=0,x={parse:function(a,g){var h=(g=g||{}).dynamicTyping||!1;if(o(h)&&(g.dynamicTypingFunction=h,h={}),g.dynamicTyping=h,g.transform=!!o(g.transform)&&g.transform,g.worker&&x.WORKERS_SUPPORTED){var i=function(){if(!x.WORKERS_SUPPORTED)return!1;if(!u&&null===x.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var a=x.SCRIPT_PATH||p;a+=(-1!==a.indexOf("?")?"&":"?")+"papaworker";var b=new r.Worker(a);return b.onmessage=j,b.id=w++,v[b.id]=b}();return i.userStep=g.step,i.userChunk=g.chunk,i.userComplete=g.complete,i.userError=g.error,g.step=o(g.step),g.chunk=o(g.chunk),g.complete=o(g.complete),g.error=o(g.error),delete g.worker,void i.postMessage({input:a,config:g,workerId:i.id})}var k=null;return a===x.NODE_STREAM_INPUT?(k=new f(g)).getStream():("string"==typeof a?k=g.download?new b(g):new d(g):!0===a.readable&&o(a.read)&&o(a.on)?k=new e(g):(r.File&&a instanceof File||a instanceof Object)&&(k=new c(g)),k.stream(a))},unparse:function(a,b){function c(a){if("object"!=typeof a)return[];var b=[];for(var c in a)b.push(c);return b}function d(a,b,c){var d="";"string"==typeof a&&(a=JSON.parse(a)),"string"==typeof b&&(b=JSON.parse(b));var f=Array.isArray(a)&&0<a.length,j=!Array.isArray(b[0]);if(f&&g){for(var k=0;k<a.length;k++)k>0&&(d+=h),d+=e(a[k],k);0<b.length&&(d+=i)}for(var l=0;l<b.length;l++){var m=f?a.length:b[l].length,n=f?a:b[l];if("greedy"!==c||""!==n.join("").trim()){for(var o=0;m>o;o++){o>0&&(d+=h);var p=f&&j?a[o]:o;d+=e(b[l][p],o)}l<b.length-1&&(!c||m>0)&&(d+=i)}}return d}function e(a,b){if(null==a)return"";if(a.constructor===Date)return JSON.stringify(a).slice(1,25);a=a.toString().replace(l,j+j);var c="boolean"==typeof f&&f||Array.isArray(f)&&f[b]||function(a,b){for(var c=0;c<b.length;c++)if(-1<a.indexOf(b[c]))return!0;return!1}(a,x.BAD_DELIMITERS)||-1<a.indexOf(h)||" "===a.charAt(0)||" "===a.charAt(a.length-1);return c?j+a+j:a}var f=!1,g=!0,h=",",i="\r\n",j='"',k=!1;!function(){"object"==typeof b&&("string"!=typeof b.delimiter||x.BAD_DELIMITERS.filter(function(a){return-1!==b.delimiter.indexOf(a)}).length||(h=b.delimiter),("boolean"==typeof b.quotes||Array.isArray(b.quotes))&&(f=b.quotes),"boolean"!=typeof b.skipEmptyLines&&"string"!=typeof b.skipEmptyLines||(k=b.skipEmptyLines),"string"==typeof b.newline&&(i=b.newline),"string"==typeof b.quoteChar&&(j=b.quoteChar),"boolean"==typeof b.header&&(g=b.header))}();var l=new RegExp(j,"g");if("string"==typeof a&&(a=JSON.parse(a)),Array.isArray(a)){if(!a.length||Array.isArray(a[0]))return d(null,a,k);if("object"==typeof a[0])return d(c(a[0]),a,k)}else if("object"==typeof a)return"string"==typeof a.data&&(a.data=JSON.parse(a.data)),Array.isArray(a.data)&&(a.fields||(a.fields=a.meta&&a.meta.fields),a.fields||(a.fields=Array.isArray(a.data[0])?a.fields:c(a.data[0])),Array.isArray(a.data[0])||"object"==typeof a.data[0]||(a.data=[a.data])),d(a.fields||[],a.data||[],k);throw"exception: Unable to serialize unrecognized input"}};if(x.RECORD_SEP=String.fromCharCode(30),x.UNIT_SEP=String.fromCharCode(31),x.BYTE_ORDER_MARK="\ufeff",x.BAD_DELIMITERS=["\r","\n",'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!s&&!!r.Worker,x.SCRIPT_PATH=null,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=i,x.ParserHandle=g,x.NetworkStreamer=b,x.FileStreamer=c,x.StringStreamer=d,x.ReadableStreamStreamer=e,x.DuplexStreamStreamer=f,r.jQuery){var y=r.jQuery;y.fn.parse=function(a){function b(){if(0!==e.length){var b,d,f,g,h=e[0];if(o(a.before)){var i=a.before(h.file,h.inputElem);if("object"==typeof i){if("abort"===i.action)return b="AbortError",d=h.file,f=h.inputElem,g=i.reason,void(o(a.error)&&a.error({name:b},d,f,g));if("skip"===i.action)return void c();"object"==typeof i.config&&(h.instanceConfig=y.extend(h.instanceConfig,i.config))}else if("skip"===i)return void c()}var j=h.instanceConfig.complete;h.instanceConfig.complete=function(a){o(j)&&j(a,h.file,h.inputElem),c()},x.parse(h.file,h.instanceConfig)}else o(a.complete)&&a.complete()}function c(){e.splice(0,1),b()}var d=a.config||{},e=[];return this.each(function(a){if("INPUT"!==y(this).prop("tagName").toUpperCase()||"file"!==y(this).attr("type").toLowerCase()||!r.FileReader||!this.files||0===this.files.length)return!0;for(var b=0;b<this.files.length;b++)e.push({file:this.files[b],inputElem:this,instanceConfig:y.extend({},d)})}),b(),this}}return t?r.onmessage=function(a){var b=a.data;if(void 0===x.WORKER_ID&&b&&(x.WORKER_ID=b.workerId),"string"==typeof b.input)r.postMessage({workerId:x.WORKER_ID,results:x.parse(b.input,b.config),finished:!0});else if(r.File&&b.input instanceof File||b.input instanceof Object){var c=x.parse(b.input,b.config);c&&r.postMessage({workerId:x.WORKER_ID,results:c,finished:!0})}}:x.WORKERS_SUPPORTED&&(q=document.getElementsByTagName("script"),p=q.length?q[q.length-1].src:"",document.body?document.addEventListener("DOMContentLoaded",function(){u=!0},!0):u=!0),(b.prototype=Object.create(a.prototype)).constructor=b,(c.prototype=Object.create(a.prototype)).constructor=c,(d.prototype=Object.create(d.prototype)).constructor=d,(e.prototype=Object.create(a.prototype)).constructor=e,(f.prototype=Object.create(a.prototype)).constructor=f,x});var getMontoRange=function(a){var b=5e7,c="monto_mas_50";return c=_.inRange(a,0,b)?"monto_0_50":_.inRange(a,b,2*b)?"monto_50_100":_.inRange(a,2*b,3*b)?"monto_100_150":"monto_mas_50"},jurisdiccionesIds={},jurisdiccionesCounter=1,cleanData=function(a,b,c){var d={};for(var e in a)a.hasOwnProperty(e)&&(d[e.toLowerCase()]=a[e]);d.compromiso="SI"==d.compromiso?!0:!1,d.jurisdiccion&&d.jurisdiccion.toString().trim().length&&(jurisdiccionesIds[d.jurisdiccion]||(jurisdiccionesIds[d.jurisdiccion]=jurisdiccionesCounter,jurisdiccionesCounter+=1),d.jurisdiccion_id=jurisdiccionesIds[d.jurisdiccion]);var f=d.comuna?d.comuna.split("|"):[null];d.comuna=f[0],d.comuna=d.comuna?parseInt(d.comuna.toString().trim()):d.comuna,d.comuna||(d.comuna_from_jurisdiccion=!0,d.comuna=d.jurisdiccion_id),d.barrio=d.barrio?d.barrio.split("|"):[],d.licitacion_oferta_empresa=d.licitacion_oferta_empresa?d.licitacion_oferta_empresa:null,d.mano_obra=d.mano_obra?parseInt(d.mano_obra):null,d.id=parseInt(d.id||b),d.licitacion_anio=d.licitacion_anio?parseInt(d.licitacion_anio.toString().trim()):null,d.monto_contrato=d.monto_contrato?parseFloat(d.monto_contrato.toString().replace(/[$]+/g,"").trim()):null,d.licitacion_presupuesto_oficial=d.licitacion_presupuesto_oficial?parseFloat(d.licitacion_presupuesto_oficial.toString().trim()):null,d.plazo_meses=d.plazo_meses?parseInt(d.plazo_meses.toString().trim()):null,d.porcentaje_avance=d.porcentaje_avance?d.porcentaje_avance.toString().trim():"",d.porcentaje_avance.toString().trim(),d.porcentaje_avance=isNaN(d.porcentaje_avance)?"":d.porcentaje_avance,d.porcentaje_avance=d.porcentaje_avance?parseFloat(d.porcentaje_avance):null,d.porcentaje_avance="Finalizada"===d.etapa?100:d.porcentaje_avance,d.hideDates="En proyecto"===d.etapa||"En licitación"===d.etapa||!d.fecha_inicio||!d.fecha_fin_inicial,d.fotos=[];for(var g=1;4>=g;g++){var e="imagen_"+g;d[e]&&(d.fotos[g-1]=d[e])}return d.thumb=d.fotos[0]||"",d.entorno_slug=d.entorno?c.slugify(d.entorno.toString().trim()):null,d.etapa_slug=d.etapa?c.slugify(d.etapa.toString().trim()):null,d.tipo_slug=d.tipo?c.slugify(d.tipo.toString().trim()):null,d.entorno=d.entorno?d.entorno:null,d.area_slug=d.area_responsable?c.slugify(d.area_responsable.toString().trim()):null,d.red_slug=d.red?c.slugify(d.red.toString().trim()):null,d.monto_slug=d.monto_contrato?getMontoRange(d.monto_contrato):null,d.hasDetail=!!(d.etapa||d.etapa_detalle||d.tipo||d.area_responsable||d.licitacion_oferta_empresa||d.porcentaje_avance||d.plazo_meses||d.licitacion_anio||d.beneficiarios||d.mano_obra||d.monto_contrato||d.licitacion_presupuesto_oficial||d.pliego_descarga),d};window._i18n={loading:"Cargando",title:"Explorador de obras de SITE_NAME",subtitle:"Esta es la página de prueba para visualizar las obras de SITE_NAME. Click para ver página.",homeTitle:"Observatorio de Obras",homeButton:"Home",searchButton:"Buscador",jurisdictionName:"Jurisdicción",seeJurisdictionButton:"Ver jurisdicción",worksWithoutJurisdictionTitle:"Obras sin jurisdicción",homeIframeTitle:"Demo iframe: ",closeButton:"Cerrar",noResults:"No hay resultados para los filtros aplicados",plannedWork:"Obra",company:"Empresa",investmentAmount:"Monto inversión",description:"Descripción",responsableArea:"Área Responsable",type:"Tipo",commune:"Comuna",stage:"Etapa",moreInformation:"Más información",environment:"Entorno",mapLocation:"Ubicación en el Mapa",mapTitle:"Conocé las obras de tu jurisdicción",mobileMapTitle:"Tocá sobre una jurisdicción para conocer las obras",searchBy:"Buscar por",featuredWorks:"Ver Obras Destacadas",seeMore:"Ver mas",governmentCommitment:"Compromiso de Gobierno",technicalInformation:"Ficha técnica",featuredWork:"Obra destacada",start:"Inicio",end:"Fin",workType:"Tipo de obra",contractType:"Tipo de contratación",contractNumber:"N° de contratación",termDuration:"Plazo total",months:"meses",yearOfTender:"Año de licitación",numberOfBeneficiaries:"Cantidad de Beneficiaros",people:"personas",workforce:"Mano de Obra",contractAmount:"Monto Contrato",address:"Dirección",updatedAmount:"Monto Actualizado",financer:"Financiador",contractInformation:"Información de la contratación",environmentalImpact:"Evaluación de impacto ambiental",workLocation:"Ubicación de obra",plannedWorks:"obras",ofTheTotal:"del total",all:"TODAS",filterByGovernmentArea:"Filtrar por área de gobierno",totalWorks:"Total de obras",ended:"Finalizadas",employees:"Empleados",upTo50Millions:"Hasta 50 millones",from50To100Millions:"50  a 100 millones",from100To150Millions:"100 a 150 millones",moreThan150Millions:"Más de 150 millones"},angular.module("obrasMduytApp",["ngRoute","ngSanitize","slugifier","angular-flexslider","leaflet-directive","ngYoutubeEmbed","ngTable"]).config(["$routeProvider","$logProvider","$httpProvider","$locationProvider","$provide","$sceDelegateProvider",function(a,b,c,d,e,f){a.when("/home",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home"}).when("/buscador",{templateUrl:"views/buscador.html",controller:"BuscadorCtrl",controllerAs:"buscador"}).when("/obra/:id",{templateUrl:"views/obra.html",controller:"ObraCtrl",controllerAs:"obra"}).when("/entorno/:entorno",{templateUrl:"views/entorno.html",controller:"EntornoCtrl",controllerAs:"entorno"}).otherwise({redirectTo:"/home"}),b.debugEnabled(!1),d.hashPrefix(""),e.decorator("$locale",["$delegate",function(a){return a.NUMBER_FORMATS.DECIMAL_SEP=",",a.NUMBER_FORMATS.GROUP_SEP=".",a}]),f.resourceUrlWhitelist(["self","*://ws.usig.buenosaires.gob.ar/**"])}]).service("DataService",["$http","$q","Slug","$sce",function(a,b,c,d){var e,f,g=function(){if(!window.MDUYT_CONFIG)throw"Archivo de configuración inexistente";var a;return"GET_REQUEST"===window.MDUYT_CONFIG.LOAD_USING?a=window.MDUYT_CONFIG.MAPAS_CSV:"JSONP_PROXY"===window.MDUYT_CONFIG.LOAD_USING&&(a=window.MDUYT_CONFIG.JSON_PROXY+"?source_format=csv&source="+window.MDUYT_CONFIG.MAPAS_CSV),d.trustAsResourceUrl(a)};this.getById=function(a){var c,d=b.defer();return this.retrieveAll().then(function(b){c=b.filter(function(b){return b.id===parseInt(a)}),d.resolve(c[0])}),c=d.promise,b.when(c)},this.getByEntorno=function(a){var c,d=b.defer();return this.retrieveAll().then(function(b){c=b.filter(function(b){return b.entorno_slug===a}),d.resolve(c)}),c=d.promise,b.when(c)},this.getAll=function(){var a,c=b.defer();return this.retrieveAll().then(function(a){c.resolve(a)}),a=c.promise,b.when(a)},this.getMapas=function(){var a,c=b.defer();return this.retrieveMapas().then(function(a){c.resolve(a)}),a=c.promise,b.when(a)},this.retrieveMapas=function(){var c=g(),d=b.defer();return""==c&&(f=[]),f||(a.jsonp(c).then(function(a){f=a.data,d.resolve(f)},function(a){console.log("error: ",a),e=a,d.reject(a)}),f=d.promise),b.when(f)},this.retrieveAll=function(){return e||(e=loadData(d,b,a,c)),b.when(e)}}]).filter("capitalize",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}).filter("cleanunderscore",function(){return function(a){return a.replace(/_/g," ")}}).run(function(){}),angular.module("obrasMduytApp").directive("progressLine",function(){return{restrict:"E",replace:!0,scope:{callback:"=callback","class":"=class"},controller:["$scope","$timeout","$http",function(a,b,c){a.loading=!0;var d=function(){var b=a.obra,c=moment(b.fecha_inicio),d=moment(b.fecha_fin_inicial),e=moment(),f=d3.scale.linear().domain([0,100]).range([c.valueOf(),d.valueOf()]),g=e.valueOf(),h=parseFloat(b.porcentaje_avance);100>h&&(g=f(h));var i,j,k,l,m,i=[{label:"Category 1",value:g}],n=0,o=document.querySelectorAll(".chart")[0].clientWidth,p=55,q=5,r=0,s=d3.scale.linear().domain([c.valueOf(),d.valueOf()]).range([0,o]);d.valueOf();d3.select(".chart").html("");var k=d3.select(".chart").append("svg").attr("width",o).attr("height",p);j=k.selectAll("g").data(i).enter().append("g"),j.attr("class","bar").attr("cx",0).attr("transform",function(a,b){return"translate("+n+","+(b*(q+r)+r)+")"}),l=s,m=d3.svg.axis().scale(l).tickSize(2).orient("bottom"),j.append("rect").attr("transform","translate(0, 15)").attr("height",1).attr("width",function(a){return l(f(100))}),k.append("g").append("text").attr("class","value").attr("y",30).attr("x",0).attr("dx",0).attr("dy","0").attr("text-anchor","start").text("Inicio"),k.append("g").append("text").attr("class","value").attr("y",45).attr("x",0).attr("dx",0).attr("dy","0").attr("text-anchor","start").text(c.format("MM-YYYY")),k.append("g").append("text").attr("class","value").attr("y",30).attr("x",o).attr("dx",0).attr("dy","0").attr("text-anchor","end").text("Fin"),k.append("g").append("text").attr("class","value").attr("y",45).attr("x",o).attr("dx",0).attr("dy","0").attr("text-anchor","end").text(d.format("MM-YYYY"))},e=function(b){a.obra=b,setTimeout(d,100)};a.resizeFunction=d,a.callback(e);var f;$(window).resize(function(){clearTimeout(f),f=setTimeout(function(){a.resizeFunction&&a.resizeFunction()},500)})}],template:'<div class="chart"></div>'}}),angular.module("obrasMduytApp").directive("coloredIcons",function(){return{restrict:"E",replace:!0,scope:{callback:"=callback",scale:"=scale","class":"=class"},controller:["$scope","$element","$timeout","$http",function(a,b,c,d){a.loading=!0;a.scale;a.id="content-"+Math.floor(1e4*Math.random());var e=("."+a.id,function(c){b[0].clientWidth;setTimeout(function(){function d(a){var b=(a.percent,
g*h),c=b*(a.percent/100),d=c%1;d3.selectAll("use").attr("fill",function(a,b){return c-1>a?"#f1662f":a>c-1&&c>a?(f.append("svg:stop").attr("offset",100*d+"%").attr("stop-color","#f1662f").attr("stop-opacity",1),f.append("svg:stop").attr("offset",100*d+"%").attr("stop-color","#aaa").attr("stop-opacity",1),f.append("svg:stop").attr("offset","100%").attr("stop-color","#aaa").attr("stop-opacity",1),"url(#gradient)"):"#aaa"})}d3.select(b[0]).html("");var e=d3.select(b[0]).append("svg").attr("viewBox","0 0 100 16"),f=e.append("svg:defs").append("svg:linearGradient").attr("id","gradient").attr("y1","100%").attr("y2","0%").attr("spreadMethod","pad");f.append("svg:stop").attr("offset","0%").attr("stop-color","#f1662f").attr("stop-opacity",1),e.append("defs").append("g").attr("id","iconCustom").append("path").attr("d","M3.5,2H2.7C3,1.8,3.3,1.5,3.3,1.1c0-0.6-0.4-1-1-1c-0.6,0-1,0.4-1,1c0,0.4,0.2,0.7,0.6,0.9H1.1C0.7,2,0.4,2.3,0.4,2.6v1.9c0,0.3,0.3,0.6,0.6,0.6h0.2c0,0,0,0.1,0,0.1v1.9c0,0.3,0.2,0.6,0.3,0.6h1.3c0.2,0,0.3-0.3,0.3-0.6V5.3c0,0,0-0.1,0-0.1h0.2c0.3,0,0.6-0.3,0.6-0.6V2.6C4.1,2.3,3.8,2,3.5,2z"),e.append("rect").attr("width",100).attr("height",10).attr("fill","#efefef");var g=22,h=1,i=2,j=1,k=4.3,l=4.3,m=d3.range(g*h);e.append("text").attr("id","txtValue").attr("x",1).attr("y",15).attr("dy",0).text("Manzana"),e.append("text").attr("id","txtValue").attr("x",30).attr("y",15).attr("dy",0).text("Barrio"),e.append("text").attr("id","txtValue").attr("x",60).attr("y",15).attr("dy",0).text("Comuna"),e.append("text").attr("id","txtValue").attr("x",85.5).attr("y",15).attr("dy",0).text("Ciudad"),e.append("g").attr("id","pictoLayer").selectAll("use").data(m).enter().append("use").attr("xlink:href","#iconCustom").attr("id",function(a){return"icon"+a}).attr("x",function(a){var b=a%g;return i+b*l}).attr("y",function(a){var b=Math.floor(a/g);return j+b*k}).classed("iconPlain",!0);var n=1,o=1;"manoDeObra"===a.scale&&(n=20,o=c.mano_obra),"beneficiarios"===a.scale&&(n=5e4,o=c.benficiarios);var p=100*o/(n*g),q={percent:p};d(q)},300)});a.callback(e)}],template:"<div class='colored'></div>"}}),angular.module("obrasMduytApp").directive("selectorHome",function(){return{restrict:"E",scope:{list:"=",updateFn:"&",selectedGroup:"="},template:"<div id='selector-home' class='row' ng-show='selectedGroup'><div ng-repeat='(key, g) in list' class='col-xs-3 selector' ng-class='{\"selectorSelected\":selectedGroup==g.id}'><a ng-click='updateFn({group:g.id})'><img ng-src=\"{{'images/selectores/'+g.id+'.svg'}}\"/><span>{{g.name}}</span></a></div></div>",replace:!0,link:function(a,b,c){}}}),angular.module("obrasMduytApp").directive("statsHome",["$timeout","$interval",function(a,b){return{restrict:"E",scope:{obras:"="},templateUrl:"views/includes/stats-home.html",replace:!0,link:function(a,c,d){function e(){_.map(g,function(b){a.total.obras+=1,b.monto_contrato&&(a.total.inversion+=b.monto_contrato),b.mano_obra&&(a.total.mano_obra+=b.mano_obra),100==b.porcentaje_avance&&(a.total.finalizadas+=1,a.total.porcentaje_finalizadas=Math.round(100*a.total.finalizadas/a.total.obras))})}function f(){a.counter_steps=20,a.current_step=0;var c=b(function(){a.counter_steps==a.current_step?b.cancel(c):(angular.forEach(a.total,function(b,c){a.totalTemp[c]=a.totalRender[c]+a.total[c]/a.counter_steps}),a.totalRender=angular.copy(a.totalTemp)),a.current_step++},200)}a.i18n=window._i18n,a.total={inversion:0,obras:0,finalizadas:0,mano_obra:0,porcentaje_finalizadas:0},a.totalTemp=angular.copy(a.total),a.totalRender=angular.copy(a.total);var g;a.$watch(d.obras,function(a){a&&(g=angular.copy(a),e(),f())})}}}]),angular.module("obrasMduytApp").directive("tipoChart",function(){return{restrict:"E",scope:{labels:"=",obras:"=",filterFn:"&",finishFn:"&",selectedFilter:"=",tipoColors:"="},template:"<div class='row chart-item'><div id='tipo-chart' ng-show='total_obras_by_tipo.length'><div class='col-md-2'><h4>Filtrar por tipo de obra</h4></div></div><div class='col-md-2'><p></p></div><div class='col-md-10 label-slug'><h3></h3></div></div>",replace:!0,link:function(a,b,c){function d(){var b=_.groupBy(j.filter(function(a){return"undefined"!=typeof a.tipo}),"tipo");a.total_obras_by_tipo=_.orderBy(_.reduce(b,function(a,b,c){return a.push({tipo:c,slug:b[0].tipo_slug,cantidad:b.length}),a},[]),"cantidad","desc"),e(),window.$(window).resize(function(){i!=$(window).width()&&(clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){e()},1e3))})}function e(){k.w=d3.select("#tipo-chart").node().getBoundingClientRect().width,k.margin=k.w/100,k.barh=40,k.gap=10,k.h=a.total_obras_by_tipo.length*(k.barh+k.gap)+2*k.gap,k.tipo_chart_container||(k.tipo_chart_container=d3.select("#tipo-chart").append("div").attr("id","tipo-chart-container").classed("col-md-10",!0),k.groups=k.tipo_chart_container.selectAll("div.tipo-group").data(a.total_obras_by_tipo),k.groups.enter().append("div").attr("id",function(a){return"tipo-group-"+a.slug}).classed("tipo-group",!0).each(function(b){var c=d3.select(this),d=c.append("a").datum(b).classed("tipo-container",!0).on("click",function(b){a.filterFn({filter:b.slug}),g?g&&h!=b.slug?($(".label-slug h3").html(a.labels[b.slug]),h=b.slug):g&&h==b.slug&&($(".label-slug h3").html(""),g=!1):($(".label-slug h3").html(a.labels[b.slug]),h=b.slug,g=!0)}),e=d.append("div").classed("image-container",!0);d.append("span").datum(b).classed("tipo-text",!0).attr("fill","#fff").text(function(){return b.tipo}),d3.xml("images/iconos/"+b.slug+".svg",function(c,d){if(c)return void console.error(c);var f=d.getElementsByTagName("svg")[0];e.node().appendChild(f);var g=a.tipoColors(b.tipo),h=e.select("svg").attr("height",50).attr("width",50);h.selectAll("path,rect").attr("fill",g)})})),a.finishFn()}function f(){if(a.selectedFilter){var b=k.tipo_chart_container.select("#tipo-group-"+a.selectedFilter);b.empty()?k.tipo_chart_container.selectAll(".tipo-group").classed("selected",!1):(k.tipo_chart_container.selectAll(".tipo-group").classed("selected",!1),b.classed("selected",!0))}else k.tipo_chart_container.selectAll(".tipo-group").classed("selected",!1)}var g=!1,h="",i=0;$(window).load(function(){i=$(window).width()});var j,k={};a.$watch(c.obras,function(a){a&&"object"==typeof a&&(j=a,d())}),a.$watch(c.selectedFilter,function(a){k.groups&&f()})}}}),angular.module("obrasMduytApp").directive("etapaChart",function(){return{restrict:"E",scope:{obras:"=",filterFn:"&",selectedFilter:"=",tipoColors:"="},template:"<div id='etapa-chart'></div>",replace:!0,link:function(a,b,c){function d(){a.obras_by_etapa=_.map(_.groupBy(h.filter(function(a){return"undefined"!=typeof a.etapa}),"etapa"),function(a,b){var c=_.groupBy(a.filter(function(a){return"undefined"!=typeof a.tipo}),"tipo"),d={slug:a[0].etapa_slug,etapa:a[0].etapa,obras:_.orderBy(_.reduce(c,function(a,b,c){return a.push({tipo:c,slug:b[0].tipo_slug,cantidad:b.length}),a},[]),"cantidad","desc")};return d.cantidad=d3.sum(d.obras,function(a){return a.cantidad}),d}),e()}function e(){i.w=d3.select("#etapa-chart").node().getBoundingClientRect().width,i.margin=i.w/100,i.barh=40,i.gap=10,i.h=2*i.barh+2*i.gap,i.svg||(i.svg=d3.select("#etapa-chart").append("svg"),i.mainGroup=i.svg.append("g").classed("main-group",!0),i.selection=i.mainGroup.append("rect").classed("selection",!0).attr("height",i.gap+i.barh).attr("x",i.w).attr("y",i.barh).attr("fill","#ffbc00"),i.pipe=i.mainGroup.append("line").classed("pipe",!0).attr("height",i.h).attr("y1",i.barh/2).attr("y2",2*i.barh+2*i.gap).attr("fill","black").attr("stroke","black").attr("stroke-width",1)),i.max=d3.max(a.obras_by_etapa,function(a){return a.cantidad}),i.scale=d3.scale.linear().domain([0,i.max]).range([0,i.w/2-2*i.gap]),i.svg.attr("width",i.w).attr("height",i.h),i.selection.attr("width",i.w/2-i.gap),i.groups=i.mainGroup.selectAll("g.etapa-group").data(a.obras_by_etapa),i.pipe.attr("x1",i.w/2).attr("x2",i.w/2),i.groups.enter().append("g").attr("id",function(a){return"etapa-group-"+a.slug}).classed("etapa-group",!0).each(function(b,c){var d=d3.select(this);b.index=c,_.map(b.obras,function(a){return a.index=c,a}),d.selectAll("rect.etapa-rect").data(b.obras).enter().append("rect").classed("etapa-rect",!0).attr("y",i.barh+i.gap).attr("height",i.barh).attr("fill",function(b){return a.tipoColors(b.tipo)}),d.append("text").datum(b).classed("etapa-text",!0).attr("fill","#000").attr("y",i.barh).text(function(){return b.etapa}).attr("text-anchor",function(){return 0==c?"end":"start"}),d.append("rect").datum(b).classed("click-rect",!0).attr("fill","red").attr("fill-opacity",0).on("click",function(b){a.filterFn({filter:b.slug})})});var b={g0:i.scale(i.max)+i.gap,g1:i.gap};i.groups.selectAll("rect.etapa-rect").attr("width",function(a){return i.scale(a.cantidad)}).attr("x",function(a){var c=a.cantidad,d=0==a.index?Math.abs(i.scale(c)-b["g"+a.index]):i.scale(0)+b["g"+a.index];return b["g"+a.index]=0==a.index?b["g"+a.index]-i.scale(c):b["g"+a.index]+i.scale(c),d}),i.groups.selectAll("text.etapa-text").attr("x",function(a){return 0==a.index?i.w/2-i.gap:i.gap}),i.groups.selectAll("rect.click-rect").attr("width",i.w/2).attr("height",2*i.barh+2*i.gap),i.groups.transition().attr("transform",function(a,b){var c=0==b?0:i.w/2;return"translate("+c+",0)"})}function f(){if(a.selectedFilter){var b=i.mainGroup.select("#etapa-group-"+a.selectedFilter);if(b.empty())i.selection.transition().attr("x",i.w);else{var c=d3.transform(b.attr("transform")),d=c.translate[0],e=c.translate[1];i.selection.transition().attr("x",d+i.gap/2).attr("y",e+i.barh+i.gap/2)}}else i.selection.transition().attr("x",i.w)}var g=0;$(window).load(function(){g=$(window).width()});var h,i={};a.$watch(c.obras,function(a){a&&(h=a,d())}),a.$watch(c.selectedFilter,function(a){i.groups&&f()}),window.$(window).resize(function(){g!=$(window).width()&&(clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){e()},1e3))})}}}),angular.module("obrasMduytApp").directive("areaResponsableChart",function(){return{restrict:"E",scope:{obras:"=",filterFn:"&",selectedFilter:"="},templateUrl:"views/includes/home-area.html",replace:!0,link:function(a,b,c){function d(){var b=_.groupBy(h.filter(function(a){return"undefined"!=typeof a.area_responsable}),"area_responsable");a.total_obras_by_area=_.orderBy(_.reduce(b,function(a,b,c){return a.push({area:c,slug:b[0].area_slug,cantidad:b.length}),a},[]),"cantidad","desc"),a.total_obras_by_area_key=_.groupBy(a.total_obras_by_area,"slug");d3.select("#area-responsable-chart #areas").on("change",function(b){var c=d3.select("#area-responsable-chart #areas").property("value");a.filterFn({filter:c})});e()}function e(){i.w=d3.select("#area-responsable-chart #mini-chart").node().getBoundingClientRect().width,i.margin=i.w/100,i.barh=27,i.gap=2,i.h=i.barh+2*i.gap,i.svg||(i.svg=d3.select("#area-responsable-chart #mini-chart").append("svg"),i.mainGroup=i.svg.append("g").classed("main-group",!0)),a.total=d3.sum(a.total_obras_by_area,function(a){return a.cantidad}),a.selectedCantidad=a.total,i.scale=d3.scale.linear().domain([0,a.total]).range([0,i.w-(a.total_obras_by_area.length+2*i.gap)]),i.svg.attr("width",i.w).attr("height",i.h),i.groups=i.mainGroup.selectAll("g.area-group").data(a.total_obras_by_area),i.groups.enter().append("g").attr("id",function(a){return"area-group-"+a.slug}).classed("area-group",!0).each(function(b){var c=d3.select(this);c.append("rect").datum(b).classed("area-rect",!0).attr("x",i.gap),c.append("rect").datum(b).classed("click-rect",!0).attr("x",i.gap).on("click",function(b){a.filterFn({filter:b.slug})})}),i.groups.selectAll("rect.area-rect").attr("height",i.barh).attr("width",function(a){return i.scale(a.cantidad)}),i.groups.selectAll("rect.click-rect").attr("height",i.barh).attr("width",function(a){return i.scale(a.cantidad)});var b=0;i.groups.transition().attr("transform",function(a){var c=b;return b=b+i.scale(a.cantidad)+i.scale(i.gap),"translate("+c+",0)"})}function f(){if(i.mainGroup.selectAll(".area-rect").classed("selected",!1),a.total_obras_by_area_key[a.selectedFilter]){a.selected=a.selectedFilter;var b=i.mainGroup.select("#area-group-"+a.selectedFilter).select(".area-rect");b.empty()||b.classed("selected",!0),a.selectedCantidad=a.total_obras_by_area_key[a.selectedFilter][0].cantidad}else a.selected="",a.selectedCantidad=a.total}a.i18n=window._i18n;var g=0;$(window).load(function(){g=$(window).width()});var h,i={};a.$watch(c.obras,function(a){a&&(h=a,d())}),a.$watch(c.selectedFilter,function(a){i.groups&&f()}),a.selected="",window.$(window).resize(function(){g!=$(window).width()&&(clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){e()},1e3))})}}}),angular.module("ngYoutubeEmbed",[]).directive("ngYoutubeEmbed",[function(){return{restrict:"E",template:'<div ng-bind-html="youtubeEmbedFrame"></div>',scope:{url:"=",playauto:"@playauto",autohide:"@autohide",ccloadpolicy:"@ccloadpolicy",color:"@color",controls:"@controls",disablekb:"@disablekb",end:"@end",fs:"@fs",hl:"@hl",ivloadpolicy:"@ivloadpolicy",playlist:"@playlist",playsinline:"@playsinline",rel:"@rel",showinfo:"@showinfo",start:"@start",theme:"@theme",width:"@width",height:"@height"},controller:["$scope","$sce",function(a,b){var c=a.url;if(void 0!==c){if(a.playlistArray=[],void 0!==a.playlist)for(var d=a.playlist.split(","),e=0;e<d.length;e++)a.playlistArray.push(fetchId(d[e]));var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;f="true"===a.playauto?1:0,g="true"===a.autohide?1:0,h="true"===a.ccloadpolicy?1:0,i="white"===a.color?"white":"red",j="false"===a.controls?0:1,k="false"===a.disablekb?0:1,l=a.end,m="false"===a.fs?0:1,n=a.hl,o="false"===a.ivloadpolicy?0:1,p=a.playlistArray,q="true"===a.playsinline?1:0,r="false"===a.rel?0:1,s="false"===a.showinfo?0:1,t=a.start,u=a.theme,v=void 0!==a.width?a.width:"500px",w=void 0!==a.height?a.height:"350px";var x=fetchId(c),y="<iframe width="+v+" height="+w+' src="https://www.youtube.com/embed/'+x+"?autoplay="+f+"&autohide="+g+"&cc_load_policy="+h+"&color="+i+"&controls="+j+"&disablekb="+k+"&end="+l+"&fs="+m+"&hl="+n+"&playlist="+p+"&playsinline="+q+"&rel="+r+"&showinfo="+s+"&start="+t+"&theme="+u+'" frameborder="0" allowfullscreen></iframe>';a.youtubeEmbedFrame=b.trustAsHtml(y)}}]}}]),angular.module("obrasMduytApp").controller("HomeCtrl",["$scope","DataService","$filter","$http","$sce",function(a,b,c,d,e){function f(){D.w=C.select("#home-chart-container").node().getBoundingClientRect().width,D.w=!D.svg||D.w<500?D.w:D.w,a.isSmallDevice=D.w<700?!0:!1,a.isSmallDevice?(D.w=$(window).width(),D.h=$(window).width()):(D.h=D.w,D.margin=D.w/200),D.svg||(D.svg=C.select("#home-chart-container").append("svg"),D.mainGroup=D.svg.append("g").classed("main-group",!0),D.mainGroup.append("rect").attr("fill","white"),D.svg.append("g").attr("id","comunas-group"),D.svg.append("g").attr("id","map-group"),D.svg.append("g").attr("id","etapas-group"),D.svg.append("g").attr("id","montos-group"),E.group=D.svg.append("g").attr("id","bubbles-group"),E.icons=D.svg.append("g").attr("id","bubbles-icons"),a.isSmallDevice&&C.selectAll("#bubbles-group").style("display","none"),D.selection=D.svg.append("circle").attr("class","selection-cicle").attr("cx",0).attr("cy",0).attr("r",0).style("fill","none").style("stroke","black").style("stroke-width",2)),D.svg.attr("width",D.w).attr("height",D.h),D.mainGroup.select("rect").attr("width",D.w).attr("height",D.h),a.showGroup()}function g(a,b,c){var d=Math.floor(D.w/b),e=0,f=0;a.transition().duration(700).attr("transform",function(g,h){var i=e*b,j=f*c;return d-1>e?e++:a[0].length!==h+1&&(e=0,f++),"translate("+i+","+j+")"})}function h(){C.json("geo/geometry.geojson",function(b){function c(){a.isSmallDevice&&D.svg.attr("height",D.w),D.mapGroup.selectAll("path.map-item").style("display","block").style("stroke-width",0).transition().duration(1e3).style("stroke-width",3).attr("d",D.mapPath).style("opacity",1),D.mapGroup.selectAll("text.map-text").attr("x",function(a){return D.mapPath.centroid(a)[0]}).attr("y",function(a){return D.mapPath.centroid(a)[1]}).style("opacity",1).style("display","block")}var d=b&&b.properties&&b.properties.center?b.properties.center:[-58.43992,-34.618],e=b&&b.properties&&b.properties.zoomLevel?b.properties.zoomLevel:240;D.mapProjection=C.geo.mercator().center(d).translate([D.w/2,D.h/2]).scale(e*D.w),D.mapPath=C.geo.path().projection(D.mapProjection),D.mapGroup?c():(D.mapGroup=D.svg.select("#map-group"),D.mapCentroids={},D.mapFeatures=b.features,M.each(D.mapFeatures,function(a,b){D.mapCentroids["mapa-comuna-"+(a.properties&&a.properties.comuna?a.properties.comuna:b)]=D.mapPath.centroid(a)}),D.mapGroup.selectAll("path.map-item").data(D.mapFeatures).enter().append("path").classed("child",!0).classed("map-item",!0).attr("id",function(a,b){return"mapa-comuna-"+(a.properties&&a.properties.comuna?a.properties.comuna:b)}).classed("shape",!0).on("click",j),D.mapGroup.selectAll("text.map-text").data(D.mapFeatures).enter().append("text").attr("class","map-text").classed("child",!0).attr("text-anchor","middle").attr("x",function(a){return D.mapPath.centroid(a)[0]}).attr("y",function(a){return D.mapPath.centroid(a)[1]}).text(function(a,b){return a.properties&&a.properties.comuna?a.properties.comuna:""}),c())})}function i(){E.clusters={},E.clusterPoints={},E.nodesComuna=[],E.nodes=a.obras.filter(function(a){return a.lat&&a.lng}).map(function(b){var c="i"+b.id,d=a.isSmallDevice?1.25:4,e={cluster:c,radius:d,data:b};E.clusters[c]=e;var f=D.mapProjection([parseFloat(b.lng),parseFloat(b.lat)]);return E.clusterPoints[c]={x:f[0],y:f[1],radius:a.isSmallDevice?1.25:4},e}),E.scale=!1}function j(b){if(a.closeTooltip(),O.node()===this)return k();if(O.classed("active",!1),O=C.select(this).classed("active",!0),a.isSmallDevice)a.$apply(function(){a.showList=!0,a.selectedComuna=b.properties&&b.properties.comuna,a.selectedJurisdiccion=b.properties&&b.properties.id,a.filteredObras=a.obras.filter(function(b){return a.selectedComuna?parseInt(b.comuna)===parseInt(a.selectedComuna):b.jurisdiccion===a.selectedJurisdiccion})});else{var c=D.mapPath.bounds(b),d=c[1][0]-c[0][0],e=c[1][1]-c[0][1],f=(c[0][0]+c[1][0])/2,g=(c[0][1]+c[1][1])/2,h=.9/Math.max(d/D.w,e/D.h),i=[D.w/2-h*f,D.h/2-h*g];D.mapGroup.transition().duration(750).attr("transform","translate("+i+")scale("+h+")"),D.mapGroup.selectAll("path").transition().duration(750).style("stroke-width","1px"),D.selection.transition().duration(750).attr("transform","translate("+i+")scale("+h+")"),E.group.transition().duration(750).attr("transform","translate("+i+")scale("+h+")"),E.icons.transition().duration(750).attr("transform","translate("+i+")scale("+h+")")}}function k(){a.isSmallDevice&&C.selectAll("#bubbles-group").style("display","none"),O.classed("active",!1),O=C.select(null),D.mapGroup.transition().duration(750).attr("transform",""),D.selection.transition().duration(750).attr("transform",""),D.mapGroup.selectAll("path").transition().duration(750).style("stroke-width","3px"),E.icons.transition().duration(750).attr("transform",""),E.group.transition().duration(750).attr("transform","")}function l(b){var c=[],d=[];if(a.useComunas){c=C.range(1,16);for(var e=0;e<c.length;e++)d[c[e]]="Comuna "+c[e]}else{for(var f=0;f<a.obras.length;f++)a.obras[f].jurisdiccion&&-1===d.indexOf(a.obras[f].jurisdiccion)&&(d[a.obras[f].comuna]=a.obras[f].jurisdiccion,c.push(a.obras[f].jurisdiccion_id));c.sort(function(a,b){return d[a]>d[b]?1:d[a]<d[b]?-1:0})}var h,i;a.isSmallDevice?(h=D.w,i=D.w,D.svg.attr("height",c.length*D.w),D.mainGroup.select("rect").attr("height",c.length*D.w)):(h=D.h/Math.ceil(c.length/5),i=D.w/5),D.comunasGroup||(D.comunasGroup=D.svg.select("#comunas-group"),D.comunasGroup.selectAll("g.comunas-item").data(c).enter().append("g").classed("child",!0).classed("comunas-item",!0).style("opacity",0).attr("transform",function(a,b){return"translate("+(D.w/2-i/2)+","+(D.h/2-h/2)+")"}).attr("id",function(a){return"comunas-item-"+a}).each(function(){var a=C.select(this);a.append("rect").classed("comunas-item-frame",!0).on("click",n),a.append("text").classed("comunas-item-text",!0).attr("fill","#000").text(function(a){return d[a]})})),b||D.comunasGroup.selectAll("g.comunas-item").style("display","block"),D.comunasGroup.selectAll("rect.comunas-item-frame").transition().duration(700).attr("x",D.margin).attr("y",D.margin).attr("height",h-2*D.margin).attr("width",i-2*D.margin),D.comunasGroup.selectAll("text.comunas-item-text").transition().duration(700).attr("x",15).attr("y",25),g(D.comunasGroup.selectAll("g.comunas-item").transition().duration(1e3).style("opacity",1),i,h)}function m(b){E.clusters={},E.clusterPoints={};var c=b?b.replace("comunas-item-",""):!1,d=a.obras.filter(function(a){return!c||c&&parseInt(a.comuna)===parseInt(c)}),e=Math.ceil(C.max(d,function(b){return b[a.selectedRadioDimension]})),f=Math.floor(C.min(d,function(b){return b[a.selectedRadioDimension]}));E.scale=C.scale.linear().domain([parseInt(f),parseInt(e)]).range([10,c?100:50]),E.nodes=d.filter(function(a){return a.comuna&&(!c||c&&parseInt(a.comuna)===parseInt(c))}).map(function(a){var b="c"+a.comuna,d=c?10:5,e={cluster:b,radius:d?d:10,data:a};return(!E.clusters[b]||d>E.clusters[b].radius)&&(E.clusters[b]=e),e}),C.selectAll("g.comunas-item").each(function(a){var b=C.select(this),c=b.select("rect");E.clusterPoints["c"+a]={x:C.transform(b.attr("transform")).translate[0]+c.attr("width")/2,y:C.transform(b.attr("transform")).translate[1]+c.attr("height")/2,radius:20}})}function n(b){if(!a.isSmallDevice){if(a.closeTooltip(),P.node()===this)return o();P.classed("active",!1),P=C.select(this).classed("active",!0);var c=P.node().parentNode;C.selectAll("g.comunas-item").transition().style("opacity",function(){return this===c?1:0}).each("end",function(){this!==c&&C.select(this).style("display","none")}),P.transition().duration(750).attr("height",D.h-2*D.margin).attr("width",D.w-2*D.margin),C.select(c).transition().duration(750).attr("transform","translate(0,0)").each("end",function(){m(C.select(c).attr("id")),y()})}}function o(a){P.classed("active",!1),P=C.select(null),C.selectAll("g.comunas-item").style("display","block"),l(a),a||setTimeout(function(){m(),y()},2e3)}function p(b){var c,d,e=["monto_0_50","monto_50_100","monto_100_150","monto_mas_50"],f={monto_0_50:a.i18n.upTo50Millions,monto_50_100:a.i18n.from50To100Millions,monto_100_150:a.i18n.from100To150Millions,monto_mas_50:a.i18n.moreThan150Millions};a.isSmallDevice?(c=D.w,d=D.w,D.svg.attr("height",e.length*D.w),D.mainGroup.select("rect").attr("height",e.length*D.w)):(c=D.h/2,d=D.w/2),D.montosGroup||(D.montosGroup=D.svg.select("#montos-group"),D.montosGroup.selectAll("g.montos-item").data(e).enter().append("g").classed("child",!0).classed("montos-item",!0).style("opacity",0).attr("transform",function(a,b){return"translate("+(D.w/2-d/2)+","+(D.h/2-c/2)+")"}).attr("id",function(a){return"montos-item-"+a}).each(function(){var a=C.select(this);a.append("rect").classed("montos-item-frame",!0).on("click",s),a.append("text").classed("montos-item-text",!0).attr("fill","#000").text(function(a){return f[a]})})),b||D.montosGroup.selectAll("g.montos-item").style("display","block"),D.montosGroup.selectAll("rect.montos-item-frame").transition().duration(700).attr("x",D.margin).attr("y",D.margin).attr("height",c-2*D.margin).attr("width",d-2*D.margin),D.montosGroup.selectAll("text.montos-item-text").transition().duration(700).attr("x",15).attr("y",25),g(D.montosGroup.selectAll("g.montos-item").transition().duration(1e3).style("opacity",1),d,c)}function q(b){E.clusters={},E.clusterPoints={};var c=b?b.replace("montos-item-",""):!1,d=a.obras.filter(function(a){return a.monto_contrato&&""!=a.monto_contrato&&(!c||c&&a.monto_slug===c)}),e=Math.ceil(C.max(d,function(b){return b[a.selectedRadioDimension]})),f=Math.floor(C.min(d,function(b){return b[a.selectedRadioDimension]}));E.scale=C.scale.linear().domain([parseInt(f),parseInt(e)]).range([10,c?100:50]),E.nodes=d.map(function(a){var b="m-"+a.monto_slug,d=c?10:5,e={cluster:b,radius:d?d:10,data:a};return(!E.clusters[b]||d>E.clusters[b].radius)&&(E.clusters[b]=e),e}),c?E.clusterPoints=!1:C.selectAll("g.montos-item").each(function(a){var b=C.select(this),c=b.select("rect");E.clusterPoints["m-"+a]={x:C.transform(b.attr("transform")).translate[0]+c.attr("width")/2,y:C.transform(b.attr("transform")).translate[1]+c.attr("height")/2,radius:10}})}function r(a){Q.classed("active",!1),Q=C.select(null),C.selectAll("g.montos-item").style("display","block"),p(a),a||setTimeout(function(){q(),y()},2e3)}function s(b){if(!a.isSmallDevice){if(a.closeTooltip(),Q.node()===this)return r();Q.classed("active",!1),Q=C.select(this).classed("active",!0);var c=Q.node().parentNode;C.selectAll("g.montos-item").transition().style("opacity",function(){return this===c?1:0}).each("end",function(){this!==c&&C.select(this).style("display","none")}),Q.transition().duration(750).attr("height",D.h-2*D.margin).attr("width",D.w-2*D.margin),C.select(c).transition().duration(750).attr("transform","translate(0,0)").each("end",function(){q(C.select(c).attr("id")),y()})}}function t(b){var c,d,e=["en-proyecto","en-licitacion","en-ejecucion","finalizada"],f={"en-proyecto":"En Proyecto","en-licitacion":"En Licitación","en-ejecucion":"En Ejecución",finalizada:"Finalizada"};a.isSmallDevice?(c=D.w,d=D.w,D.svg.attr("height",e.length*D.w),D.mainGroup.select("rect").attr("height",e.length*D.w)):(c=D.h/2,d=D.w/2),D.etapasGroup||(D.etapasGroup=D.svg.select("#etapas-group"),D.etapasGroup.selectAll("g.etapas-item").data(e).enter().append("g").classed("child",!0).classed("etapas-item",!0).style("opacity",0).attr("transform",function(a,b){return"translate("+(D.w/2-d/2)+","+(D.h/2-c/2)+")"}).attr("id",function(a){return"etapas-item-"+a}).each(function(){var a=C.select(this);a.append("rect").classed("etapas-item-frame",!0).on("click",w),a.append("text").classed("etapas-item-text",!0).attr("fill","#000").text(function(a){return f[a]})})),b||D.etapasGroup.selectAll("g.etapas-item").style("display","block"),D.etapasGroup.selectAll("rect.etapas-item-frame").transition().duration(700).attr("x",D.margin).attr("y",D.margin).attr("height",c-2*D.margin).attr("width",d-2*D.margin),D.etapasGroup.selectAll("text.etapas-item-text").transition().duration(700).attr("x",15).attr("y",25),g(D.etapasGroup.selectAll("g.etapas-item").transition().duration(1e3).style("opacity",1),d,c)}function u(b){E.clusters={},E.clusterPoints={},E.nodesEtapas=[];var c=b?b.replace("etapas-item-",""):!1,d=a.obras.filter(function(a){return a.etapa&&""!=a.etapa&&(!c||c&&a.etapa_slug===c)}),e=Math.ceil(C.max(d,function(b){return b[a.selectedRadioDimension]})),f=Math.floor(C.min(d,function(b){return b[a.selectedRadioDimension]}));E.scale=C.scale.linear().domain([parseInt(f),parseInt(e)]).range([10,c?100:50]),E.nodes=d.map(function(a){var b="e-"+a.etapa_slug,d=c?10:5,e={cluster:b,radius:d?d:10,data:a};return(!E.clusters[b]||d>E.clusters[b].radius)&&(E.clusters[b]=e),e}),c?E.clusterPoints=!1:C.selectAll("g.etapas-item").each(function(a){var b=C.select(this),c=b.select("rect");E.clusterPoints["e-"+a]={x:C.transform(b.attr("transform")).translate[0]+c.attr("width")/2,y:C.transform(b.attr("transform")).translate[1]+c.attr("height")/2,radius:10}})}function v(a){R.classed("active",!1),R=C.select(null),C.selectAll("g.etapas-item").style("display","block"),t(a),a||setTimeout(function(){u(),y()},2e3)}function w(b){if(!a.isSmallDevice){if(a.closeTooltip(),R.node()===this)return v();R.classed("active",!1),R=C.select(this).classed("active",!0);var c=R.node().parentNode;C.selectAll("g.etapas-item").transition().style("opacity",function(){return this===c?1:0}).each("end",function(){this!==c&&C.select(this).style("display","none")}),R.transition().duration(750).attr("height",D.h-2*D.margin).attr("width",D.w-2*D.margin),C.select(c).transition().duration(750).attr("transform","translate(0,0)").each("end",function(){u(C.select(c).attr("id")),y()})}}function x(b,c,d){d.node().innerHTML="<div class='circle-bg'></div>",d.node().appendChild(c);var e=a.tipo_colors(b),f=d.select("svg").attr("width").replace("px","");f/=2;var g=d.select("svg").attr("height",50).attr("width",50);d.select(".circle-bg").style("background-color",e),g.selectAll("path,rect").attr("fill","#fff")}function y(){"mapa"!=a.selectedGroup&&E.icons.transition().duration(500).attr("opacity",0),E.force=C.layout.force().nodes(E.nodes).size([D.w,D.h]).gravity(0).charge(function(){return a.isSmallDevice?0:1}).on("tick",z).start().on("end",function(){a.loadedBanderita?"mapa"==a.selectedGroup&&E.icons.attr("opacity",1):(E.circles.filter(function(a){return a.data.destacada}).each(function(a){var b=a.x-9,c=a.y-25;E.icons.append("g").attr("class",function(b){var c=a.data.red_slug?"red "+a.data.red_slug:"",d=a.data.destacada?"destacada ":"";return"banderita  "+d+" "+a.data.tipo_slug+" "+a.data.area_slug+" "+a.data.etapa_slug+" "+c+" "+a.data.nombre.toLowerCase()}).attr("transform","translate("+b+","+c+") scale(0.25)")}),C.selectAll("g.banderita").append(function(){return F.cloneNode(!0).documentElement}),a.loadedBanderita=!0)}),E.circles=E.group.selectAll("circle.obra").data(E.nodes),a.isSmallDevice||E.circles.enter().append("circle").attr("class",function(a){var b=a.data.red_slug?"red "+a.data.red_slug:"",c=a.data.destacada?" destacada ":"";return"obra  "+c+" "+a.data.tipo_slug+" "+a.data.area_slug+" "+a.data.etapa_slug+" "+b+" "+a.data.nombre.toLowerCase()}).on("mouseenter",function(b){var c=C.select(this).style("opacity");if("1"==c){b.color_tipo_obra=a.tipo_colors(b.data.tipo),a.selectedObra=b,a.tooltipThumb=b.data.thumb,a.$apply();var f=C.select("#tooltip-logo-container");if(!a.selectedObra.map&&window.MDUYT_CONFIG.USE_USIG_MAP_TILES){var g=e.getTrustedResourceUrl("https://ws.usig.buenosaires.gob.ar/geocoder/2.2/reversegeocoding?x="+b.data.lng+"&y="+b.data.lat);d.jsonp(g,{jsonpCallbackParam:"callback"}).then(function(b){a.selectedObra.map="http://servicios.usig.buenosaires.gov.ar/LocDir/mapa.phtml?x="+b.data.puerta_x+"&y="+b.data.puerta_y+"&h=100&w=300&punto=1&r=50"})}a.showObraImg=a.selectedObra.map||window.MDUYT_CONFIG.USE_USIG_MAP_TILES,G[b.data.tipo_slug]?x(b.data.tipo,G[b.data.tipo_slug],f):C.xml("images/iconos/"+b.data.tipo_slug+".svg",function(a,c){return a?void console.error(a):(G[b.data.tipo_slug]=c.getElementsByTagName("svg")[0],void x(b.data.tipo,G[b.data.tipo_slug],f))});var h=C.select(this);D.selection.attr("cx",h.attr("cx")).attr("cy",h.attr("cy")).attr("r",0).style("stroke",b.color_tipo_obra).transition().duration(500).attr("r",13).style("opacity",1);var i=D.w/2<C.event.pageX?C.event.pageX-320:C.event.pageX,j=parseInt(a.tooltip.style("height").replace("px","")),k=document.body,l=document.documentElement,m=Math.max(k.scrollHeight,k.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight),n=m-600<C.event.pageY?C.event.pageY-j:C.event.pageY;a.tooltip.style("width","300px").transition().duration(200).style("top",n+"px").style("left",i+"px").style("opacity",1)}}).on("mouseout",function(a){}),a.isSmallDevice&&E.circles.enter().append("circle").attr("class",function(a){var b=a.data.red_slug?"red "+a.data.red_slug:"",c=a.data.destacada?"destacada ":"";return"obra "+c+" "+a.data.tipo_slug+" "+a.data.area_slug+" "+a.data.etapa_slug+" "+b+" "+a.data.nombre.toLowerCase()}).on("click",function(b){if(b.color_tipo_obra=a.tipo_colors(b.data.tipo),a.selectedObra=b,a.tooltipThumb=!1,!a.selectedObra.map){var c=e.getTrustedResourceUrl("https://ws.usig.buenosaires.gob.ar/geocoder/2.2/reversegeocoding?x="+b.data.lng+"&y="+b.data.lat);d.jsonp(c,{jsonpCallbackParam:"callback"}).then(function(b){a.selectedObra.map="http://servicios.usig.buenosaires.gov.ar/LocDir/mapa.phtml?x="+b.data.puerta_x+"&y="+b.data.puerta_y+"&h=100&w=300&punto=1&r=50"})}var f=C.select("#tooltip-logo-container");G[b.data.tipo_slug]?x(b.data.tipo,G[b.data.tipo_slug],f):C.xml("images/iconos/"+b.data.tipo_slug+".svg",function(a,c){return a?void console.error(a):(G[b.data.tipo_slug]=c.getElementsByTagName("svg")[0],void x(b.data.tipo,G[b.data.tipo_slug],f))}),C.selectAll("circle.obra").style("opacity",.3),C.select(this).style("opacity",1),a.tooltip.style("width",D.w-20+"px").transition().duration(200).style("left","10px").style("top",C.event.pageY+"px").style("opacity",1),
a.$apply()}),E.circles.attr("id",function(a){return"e"+a.data.id}).attr("class",function(a){var b=a.data.red_slug?"red "+a.data.red_slug:"",c=a.data.destacada?"destacada ":"";return"obra "+c+" "+a.data.tipo_slug+" "+a.data.area_slug+" "+a.data.etapa_slug+" "+b+" "+a.data.nombre.toLowerCase()}).style("fill",function(b){return a.tipo_colors(b.data.tipo)}),E.circles.transition().style("opacity",1).attr("r",function(a){return a.radius}),E.circles.exit().remove(),a.filterBubbles(a.selectedFilter)}function z(a){E.circles.each(A(10*a.alpha*a.alpha)).each(B(.2)).attr("cx",function(a){return a.x}).attr("cy",function(a){return a.y})}function A(a){return function(b){var c=E.clusters[b.cluster],d=1;if(c){c===b&&(E.clusterPoints?(c=E.clusterPoints[b.cluster],c={x:c.x,y:c.y,radius:-c.radius},d=5*Math.sqrt(b.radius)):(c={x:D.w/2,y:D.h/2,radius:-b.radius},d=Math.sqrt(b.radius)));var e=b.x-c.x,f=b.y-c.y,g=Math.sqrt(e*e+f*f),h=b.radius+c.radius;g!==h&&(g=(g-h)/g*a*d,b.x-=e*=g,b.y-=f*=g,c.x+=e,c.y+=f)}}}function B(a){var b=C.geom.quadtree(E.nodes);return function(c){var d=c.radius+2,e=c.x-d,f=c.x+d,g=c.y-d,h=c.y+d;b.visit(function(b,d,i,j,k){if(b.point&&b.point!==c){var l=c.x-b.point.x,m=c.y-b.point.y,n=Math.sqrt(l*l+m*m),o=c.radius+b.point.radius+2;o>n&&(n=(n-o)/n*a,c.x-=l*=n,c.y-=m*=n,b.point.x+=l,b.point.y+=m)}return d>f||e>j||i>h||g>k})}}a.i18n=window._i18n;var C=window.d3;a.loading=!0,a.pymChild=new window.pym.Child({polling:1e3});var D={},E={},F="";C.xml("images/iconos/compromiso.svg",function(a,b){F=b}),a.tipo_colors=function(a){var b=[];return b["Espacio Público"]="#A7C64D",b.Escuelas="#7874B2",b.Salud="#F1AD3C",b.Arquitectura="#38A0D7",b["Hidráulica e Infraestructura"]="#BD3E93",b.Transporte="#E84D00",b.Vivienda="#22B496",b[a]},a.selectedGroup=!1,a.oldGroup="mapa",a.selectedObra=!1;var G={};a.selectedFilter=!1,a.labels={},a.selectTypes=[];var H={label:"-Todas las Obras",slug:""};a.obrasTypeFilter=H,a.selectTypes.push(H),a.selectTypes.push({label:"Espacio Público",slug:"espacio-publico"}),a.selectTypes.push({label:"Escuelas",slug:"escuelas"}),a.selectTypes.push({label:"Salud",slug:"salud"}),a.selectTypes.push({label:"Arquitectura",slug:"arquitectura"}),a.selectTypes.push({label:"Vivienda",slug:"vivienda"}),a.selectTypes.push({label:"Transporte",slug:"transporte"}),a.selectTypes.push({label:"Hidráulica e Infraestructura",slug:"hidraulica-e-infraestructura"}),a.labels["espacio-publico"]="Obras e intervenciones en el espacio público, tales como obras en plazas y parques, en veredas o de regeneración urbana.",a.labels.escuelas="Obras de construcción, refacción o puesta en valor de establecimientos educativos.",a.labels.arquitectura="Obras civiles de reforma, puesta en valor o construcción de edificios.",a.labels.salud="Obras de construcción, remodelación y puesta en valor en hospitales y centros de salud y atención comunitaria..",a.labels.vivienda="Construcción de viviendas nuevas y obras de mejoras en viviendas existentes.",a.labels.transporte="Obras de infraestructura destinadas al transporte público y a la construcción y mantenimiento de las vías de circulación. ",a.labels["hidraulica-e-infraestructura"]="Comprende obras e intervenciones relacionadas con el tratamiento de fluidos (cursos de agua o desagües pluviales), así como obras de equipamiento, redes sanitarias, de gas o electricidad, necesarias para la vida en un entorno urbano.",a.selectedRadioDimension="monto_contrato",a.tooltip=C.select("#tooltip-home-chart"),a.pymChild.sendHeight();var I={comunas:l,montos:p,etapas:t,mapa:h},J={comunas:m,montos:q,etapas:u,mapa:i},K={comunas:o,montos:r,etapas:v,mapa:k},L={comunas:!1,montos:!1,etapas:!1,mapa:!1},M=window._,N=0;$(window).load(function(){N=$(window).width()}),b.getAll().then(function(b){a.obras=b,a.selectedGroup="mapa",a.useComunas=!0;for(var c=0;c<a.obras.length;c++)a.obras[c].comuna_from_jurisdiccion&&(a.useComunas=!1);a.availableGroups=[{id:"mapa",name:"Mapa"},{id:"comunas",name:a.useComunas?"Comunas":"Jurisdicciones"},{id:"montos",name:"Inversión"},{id:"etapas",name:"Etapas"}],a.loading=!1,setTimeout(function(){f()},1e3),window.$(window).resize(function(){N!=$(window).width()&&(clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){L={comunas:!1,montos:!1,etapas:!1,mapa:!1},f()},1e3))})}),a.textFilter="",a.$watch("textFilter",function(b,c){a.loading||a.filterByText()}),a.filterByText=function(){a.textFilter=$(".text-filter").val(),a.textFilter.length>3&&a.filterBubbles(a.selectedFilter,a.textFilter),0===a.textFilter.length&&a.filterBubbles(a.selectedFilter)},a.filterBubbles=function(b){if(a.selectedFilter==b&&(C.selectAll("circle.obra").style("opacity",1),C.selectAll("g.banderita").style("opacity",1),b=!1),""==b&&""==a.textFilter)C.selectAll("circle.obra").style("opacity",1),C.selectAll("g.banderita").style("opacity",1);else if(""==a.textFilter)C.selectAll("circle.obra").style("opacity",.2),C.selectAll("g.banderita").style("opacity",.2),C.selectAll("circle.obra."+b).style("opacity",1),C.selectAll("g.banderita."+b).style("opacity",1);else{C.selectAll("circle.obra").style("opacity",.2);for(var c=a.textFilter.toLowerCase().split(" "),d=0;d<c.length;d++){var e="";""!=b&&(e+="."+b),e+="."+c[d],C.selectAll("circle.obra"+e).style("opacity",1),C.selectAll("g.banderita"+e).style("opacity",1)}}a.selectedFilter=b,a.closeTooltip(),a.$$phase||a.$apply()},a.changeGroup=function(b){a.selectedGroup=b,a.showGroup()},a.showGroup=function(){a.oldGroup!==a.selectedGroup&&(a.closeTooltip(),K[a.oldGroup](!0),D.svg.selectAll(".child").style("opacity",0).style("display","none"),D.svg.selectAll("circle.obra").transition().style("opacity",.5),a.oldGroup=a.selectedGroup),I[a.selectedGroup]();var b=L[a.selectedGroup]||"mapa"===a.selectedGroup?100:2e3;L[a.selectedGroup]=!0,setTimeout(function(){J[a.selectedGroup](),y()},b)};var O=C.select(null),P=C.select(null),Q=C.select(null),R=C.select(null);a.loadedBanderita=!1,a.closeTooltip=function(){D.selection.transition().duration(200).attr("r",0).style("opacity",0),a.tooltip.transition().duration(200).style("top","-500px").style("opacity",0)},a.closeList=function(){a.showList=!1,a.filteredObras=[],a.selectedComuna=""}}]),angular.module("obrasMduytApp").controller("ObraCtrl",["$scope","DataService","$routeParams",function(a,b,c){a.i18n=window._i18n,a.loading=!0,a.pymChild=new window.pym.Child({polling:1e3}),a.pymChild.sendHeight(),a.obraId=c.id,a.tipo_colors=function(a){var b=[];return b["Espacio Público"]="#A7C64D",b.Escuelas="#7874B2",b.Salud="#F1AD3C",b.Arquitectura="#38A0D7",b["Hidráulica e Infraestructura"]="#BD3E93",b.Transporte="#E84D00",b.Vivienda="#22B496",b[a]};var d;d=window.MDUYT_CONFIG.USE_USIG_MAP_TILES?{url:"//tiles1.usig.buenosaires.gob.ar/mapcache/tms/1.0.0/amba_con_transporte_3857@GoogleMapsCompatible/{z}/{x}/{y}.png",format:"tms",builder:"tms",baseLayer:!0,options:{maxZoom:18,minZoom:9,attribution:'USIG (<a href="http://www.buenosaires.gob.ar" target="_blank">GCBA</a>), © <a href="http://www.openstreetmap.org/copyright/en" target="_blank">OpenStreetMap</a> (ODbL)',tms:!0}}:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",baseLayer:!0},a.titles=d,angular.extend(a,{markers:{},center:{lat:-34.604,lng:-58.382,zoom:15},tiles:d,defaults:{scrollWheelZoom:!1}}),a.mainCallback=function(b){a.drawLineOnObraLoaded=b},a.drawFirstColored=function(b){a.firstColoredLoaded=b},a.drawSecondColored=function(b){a.secondColoredLoaded=b},b.getById(c.id).then(function(b){a.obra=b,!b.hideDates&&a.drawLineOnObraLoaded&&a.drawLineOnObraLoaded(b),b.beneficiarios&&a.firstColoredLoaded&&a.firstColoredLoaded(b),b.mano_obra&&a.secondColoredLoaded&&a.secondColoredLoaded(b),a.slides=b.fotos.map(function(a){return{mode:a.includes("youtu")?"video":"photo",url:a,pic:a.includes("youtu")?getYoutubePic(a):a}}),angular.extend(a,{center:{lat:parseFloat(b.lat),lng:parseFloat(b.lng),zoom:15},markers:{m1:{lat:parseFloat(b.lat),lng:parseFloat(b.lng),focus:!0,message:b.nombre}}}),a.center.lat=parseFloat(b.lat),a.center.lng=parseFloat(b.lng);({starting_time:b.fecha_inicio,ending_time:b.fecha_fin_inicial});a.loading=!1})}]),angular.module("obrasMduytApp").controller("EntornoCtrl",["$scope","DataService","$routeParams","leafletData","$timeout",function(a,b,c,d,e){a.i18n=window._i18n,a.loading=!0,a.pymChild=new window.pym.Child({polling:1e3}),a.pymChild.sendHeight();var f;f=window.MDUYT_CONFIG.USE_USIG_MAP_TILES?{url:"//tiles1.usig.buenosaires.gob.ar/mapcache/tms/1.0.0/amba_con_transporte_3857@GoogleMapsCompatible/{z}/{x}/{y}.png",format:"tms",builder:"tms",baseLayer:!0,options:{maxZoom:18,minZoom:9,attribution:'USIG (<a href="http://www.buenosaires.gob.ar" target="_blank">GCBA</a>), © <a href="http://www.openstreetmap.org/copyright/en" target="_blank">OpenStreetMap</a> (ODbL)',tms:!0}}:{url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",baseLayer:!0},a.titles=f,angular.extend(a,{markers:{},center:{lat:-34.604,lng:-58.382,zoom:15},tiles:f,defaults:{scrollWheelZoom:!1}}),b.getByEntorno(c.entorno).then(function(b){a.entorno=c.entorno,a.obras=b;for(var f={},g=[],h=0;h<b.length;h++){var i=b[h];if(i.lat&&i.lng){var j={lat:parseFloat(i.lat),lng:parseFloat(i.lng),focus:!0,message:i.nombre};f["m"+h]=j,g.push(L.marker([j.lat,j.lng]))}}var k=new L.featureGroup(g);angular.extend(a,{markers:f}),a.loading=!1,e(function(){d.getMap().then(function(a){a.fitBounds(k.getBounds(),{padding:[50,50]})})},1e3)})}]),angular.module("obrasMduytApp").controller("BuscadorCtrl",["$scope","DataService","$routeParams","NgTableParams","$filter","$sce","ngTableEventsChannel",function(a,b,c,d,e,f,g){a.i18n=window._i18n,a.loading=!0,a.pymChild=new window.pym.Child({polling:1e3}),a.pymChild.sendHeight(),a.montos_string={monto_0_50:a.i18n.upTo50Millions,monto_50_100:a.i18n.from50To100Millions,monto_100_150:a.i18n.from100To150Millions,monto_mas_50:a.i18n.moreThan150Millions},b.getAll().then(function(b){function c(a,b){return b[this.field]}function e(a,b){var c=b[this.field],d="";return c&&""!=c&&(d="<a href='"+c+"' class='btn btn-default btn-xs btn-block' target='_blank'>Más información</a>"),f.trustAsHtml(d)}function h(b){a.results=b.data}function i(){$('[ng-table-pagination="params"]').appendTo("#footer")}var j={comunas:d3.keys(d3.nest().key(function(a){return a.comuna}).map(b.filter(function(a){return null!==a.comuna}))).map(function(a){return{id:a.trim(),title:"Comuna "+a}}),etapas:d3.keys(d3.nest().key(function(a){return a.etapa}).map(b)).map(function(a){return{id:a,title:a}}),tipos:d3.keys(d3.nest().key(function(a){return a.tipo}).map(b)).map(function(a){return{id:a,title:a}}),montos:d3.keys(d3.nest().key(function(a){return a.monto_slug}).map(b.filter(function(a){return a.monto_slug}))).map(function(b){return{id:b,title:a.montos_string[b]}}),areas:d3.keys(d3.nest().key(function(a){return a.area_responsable}).map(b.filter(function(a){return a.area_responsable}))).map(function(a){return{id:a,title:a}})};j.comunas.unshift({id:"",title:a.i18n.all}),j.etapas.unshift({id:"",title:a.i18n.all}),j.areas.unshift({id:"",title:a.i18n.all}),j.tipos.unshift({id:"",title:a.i18n.all}),j.montos.unshift({id:"",title:a.i18n.all}),a.cols=[];var k=function(a){return _.some(b,function(b){return b[a]})};k("comuna")&&a.cols.push({field:"comuna",title:"Comuna",filter:{comuna:"select"},filterData:j.comunas,show:!0,getValue:c}),a.cols.push({field:"nombre",title:"Nombre",filter:{nombre:"text"},show:!0,"class":"lupita",getValue:c}),k("area_responsable")&&a.cols.push({field:"area_responsable",title:"Área Responsable",filter:{area_responsable:"select"},filterData:j.areas,show:!0,getValue:c}),k("etapa")&&a.cols.push({field:"etapa",title:"Etapa",filter:{etapa:"select"},filterData:j.etapas,show:!0,getValue:c}),k("tipo")&&a.cols.push({field:"tipo",title:"Tipo",filter:{tipo:"select"},filterData:j.tipos,show:!0,getValue:c}),k("monto_slug")&&a.cols.push({field:"monto_slug",title:"Monto Inversión",filter:{monto_slug:"select"},filterData:j.montos,show:!0,getValue:c}),k("link_interno")&&a.cols.push({field:"link_interno",title:"",filter:!1,show:!0,getValue:e}),k("licitacion_oferta_empresa")&&a.cols.push({field:"licitacion_oferta_empresa",title:"Empresa",filter:{licitacion_oferta_empresa:"text"},show:!0,"class":"lupita",getValue:c}),g.onAfterCreated(i,a),g.onAfterReloadData(h,a),a.tableParams=new d({sorting:{comuna:"asc"},filter:{comuna:"",etapa:"",tipo:"",monto_slug:"",area_responsable:""},page:1,count:10},{dataset:b,counts:[10,25,50]});a.loading=!1,a.timeoutId,window.$(window).resize(function(){clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){},1e3)})})}]),!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof exports?exports["ng-table"]=b(require("angular")):a["ng-table"]=b(a.angular)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,b,c){Object.defineProperty(a,b,{configurable:!1,enumerable:!0,get:c})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=33)}(function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))switch(typeof a[b]){case"function":break;case"object":a[b]=function(b){var c=b.slice(1),d=a[b[0]];return function(a,b,e){d.apply(this,[a,b,e].concat(c))}}(a[b]);break;default:a[b]=a[a[b]]}return a}([function(b,c){b.exports=a},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=c(0),f=c(4),g=c(5),h=c(6),i=c(7),j=c(8),k=c(9),l=c(10),m=c(11),n=c(12),o=c(13),p=c(14),q=c(15),r=c(16),s=c(17);c(25),c(27),c(26),c(28),c(31),c(30),Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e.module("ngTable-browser",[]).directive("ngTable",f.ngTable).factory("ngTableColumn",g.ngTableColumn).directive("ngTableColumnsBinding",h.ngTableColumnsBinding).controller("ngTableController",i.ngTableController).directive("ngTableDynamic",j.ngTableDynamic).provider("ngTableFilterConfig",k.ngTableFilterConfigProvider).directive("ngTableFilterRow",l.ngTableFilterRow).controller("ngTableFilterRowController",m.ngTableFilterRowController).directive("ngTableGroupRow",n.ngTableGroupRow).controller("ngTableGroupRowController",o.ngTableGroupRowController).directive("ngTablePagination",p.ngTablePagination).directive("ngTableSelectFilterDs",q.ngTableSelectFilterDs).directive("ngTableSorterRow",r.ngTableSorterRow).controller("ngTableSorterRowController",s.ngTableSorterRowController),d(c(18))},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=c(0),f=c(19),g=c(20),h=c(22),i=c(21);Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e.module("ngTable-core",[]).provider("ngTableDefaultGetData",f.ngTableDefaultGetDataProvider).value("ngTableDefaults",g.ngTableDefaults).factory("NgTableParams",h.ngTableParamsFactory).factory("ngTableEventsChannel",i.ngTableEventsChannel),d(c(23))},,function(a,b,c){"use strict";function d(a,b){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(a){var c,d,f=[],g=0,h=[];return e.forEach(a.find("tr"),function(a){h.push(e.element(a))}),c=h.filter(function(a){return!a.hasClass("ng-table-group")})[0],d=h.filter(function(a){return a.hasClass("ng-table-group")})[0],c?(e.forEach(c.find("td"),function(a){var c=e.element(a);if(!c.attr("ignore-cell")||"true"!==c.attr("ignore-cell")){var h=function(a){return c.attr("x-data-"+a)||c.attr("data-"+a)||c.attr(a)},i=function(a,b){c.attr("x-data-"+a)?c.attr("x-data-"+a,b):c.attr("data"+a)?c.attr("data"+a,b):c.attr(a,b)},j=function(a){var c=h(a);if(c){var d,e=function(a){return void 0!==d?d:b(c)(a)};return e.assign=function(a,e){var f=b(c);f.assign?f.assign(a.$parent,e):d=e},e}},k=h("title-alt")||h("title");k&&c.attr("data-title-text","{{"+k+"}}"),f.push({id:g++,title:j("title"),titleAlt:j("title-alt"),headerTitle:j("header-title"),sortable:j("sortable"),"class":j("header-class"),filter:j("filter"),groupable:j("groupable"),headerTemplateURL:j("header"),filterData:j("filter-data"),show:c.attr("ng-if")?j("ng-if"):void 0}),(d||c.attr("ng-if"))&&i("ng-if","$columns["+(f.length-1)+"].show(this)")}}),function(a,b,c,d){a.$columns=f=d.buildColumns(f),d.setupBindingsToInternalScope(c.ngTable),d.loadFilterData(f),d.compileDirectiveTemplates()}):void 0}}}var e=c(0);d.$inject=["$q","$parse"],b.ngTable=d},function(a,b,c){"use strict";function d(){function a(a,c,f){var g=Object.create(a),h=b();for(var i in h)void 0===g[i]&&(g[i]=h[i]),e.isFunction(g[i])||!function(b){var c=function e(){return 1!==arguments.length||d(arguments[0])?a[b]:void e.assign(null,arguments[0])};c.assign=function(c,d){a[b]=d},g[b]=c}(i),function(b){var h=g[b];g[b]=function(){if(1!==arguments.length||d(arguments[0])){var b=arguments[0]||c,i=Object.create(b);return e.extend(i,{$column:g,$columns:f}),h.call(a,i)}h.assign(null,arguments[0])},h.assign&&(g[b].assign=h.assign)}(i);return g}function b(){return{"class":c(""),filter:c(!1),groupable:c(!1),filterData:e.noop,headerTemplateURL:c(!1),headerTitle:c(""),sortable:c(!1),show:c(!0),title:c(""),titleAlt:c("")}}function c(a){var b=a,c=function e(){return 1!==arguments.length||d(arguments[0])?b:void e.assign(null,arguments[0])};return c.assign=function(a,c){b=c},c}function d(a){return null!=a&&e.isFunction(a.$new)}return{buildColumn:a}}var e=c(0);d.$inject=[],b.ngTableColumn=d},function(a,b){"use strict";function c(a){function b(b,c,d){var e=a(d.ngTableColumnsBinding).assign;e&&b.$watch("$columns",function(a){var c=(a||[]).slice(0);e(b,c)})}var c={restrict:"A",require:"ngTable",link:b};return c}c.$inject=["$parse"],b.ngTableColumnsBinding=c},function(a,b,c){"use strict";function d(a,b,c,d,f,g,h,i,j,k){function l(b){if(b&&!a.params.hasErrorState()){var c=a.params,d=c.settings().filterOptions;if(c.hasFilterChanges()){var e=function(){c.page(1),c.reload()};d.filterDelay?s(e,d.filterDelay):e()}else c.reload()}}function m(){g.showFilter?a.$parent.$watch(g.showFilter,function(b){a.show_filter=b}):a.$watch(p,function(b){a.show_filter=b}),g.disableFilter&&a.$parent.$watch(g.disableFilter,function(b){a.$filterRow.disabled=b})}function n(){if(a.$groupRow={show:!1},g.showGroup){var b=d(g.showGroup);a.$parent.$watch(b,function(b){a.$groupRow.show=b}),b.assign&&a.$watch("$groupRow.show",function(c){b.assign(a.$parent,c)})}else a.$watch("params.hasGroup()",function(b){a.$groupRow.show=b})}function o(){return(a.$columns||[]).filter(function(b){return b.show(a)})}function p(){return!!a.$columns&&q(a.$columns,function(b){return b.show(a)&&!!b.filter(a)})}function q(a,b){for(var c=!1,d=0;d<a.length;d++){var e=a[d];if(b(e)){c=!0;break}}return c}function r(){k.onAfterReloadData(function(b,c){var d=o();b.hasGroup()?(a.$groups=c||[],a.$groups.visibleColumnCount=d.length):(a.$data=c||[],a.$data.visibleColumnCount=d.length)},a,function(b){return a.params===b}),k.onPagesChanged(function(b,c){a.pages=c},a,function(b){return a.params===b})}a.$filterRow={disabled:!1},a.$loading=!1,a.hasOwnProperty("params")||(a.params=new b(!0));var s=function(){var a;return function(b,d){c.cancel(a),a=c(b,d)}}();a.$watch("params",function(a,b){a!==b&&a&&a.reload()},!1),a.$watch("params.isDataReloadRequired()",l),this.compileDirectiveTemplates=function(){if(!h.hasClass("ng-table")){a.templates={header:g.templateHeader?g.templateHeader:"ng-table/header.html",pagination:g.templatePagination?g.templatePagination:"ng-table/pager.html"},h.addClass("ng-table");var b=null,c=!1;e.forEach(h.children(),function(a){"THEAD"===a.tagName&&(c=!0)}),c||(b=e.element('<thead ng-include="templates.header"></thead>',i),h.prepend(b));var d=e.element('<div ng-table-pagination="params" template-url="templates.pagination"></div>',i);h.after(d),b&&f(b)(a),f(d)(a)}},this.loadFilterData=function(b){function c(a){return a&&"object"==typeof a&&"function"==typeof a.then}e.forEach(b,function(b){var d=b.filterData(a);return d?c(d)?(delete b.filterData,d.then(function(a){e.isArray(a)||e.isFunction(a)||e.isObject(a)||(a=[]),b.data=a})):b.data=d:void delete b.filterData})},this.buildColumns=function(b){var c=[];return(b||[]).forEach(function(b){c.push(j.buildColumn(b,a,c))}),c},this.parseNgTableDynamicExpr=function(a){if(!a||a.indexOf(" with ")>-1){var b=a.split(/\s+with\s+/);return{tableParams:b[0],columns:b[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},this.setupBindingsToInternalScope=function(b){a.$watch(b,function(b){void 0!==b&&(a.params=b)},!1),m(),n()},r()}var e=c(0);d.$inject=["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","$document","ngTableColumn","ngTableEventsChannel"],b.ngTableController=d},function(a,b,c){"use strict";function d(){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(a){var b;return e.forEach(a.find("tr"),function(a){a=e.element(a),a.hasClass("ng-table-group")||b||(b=a)}),b?(e.forEach(b.find("td"),function(a){var b=e.element(a),c=function(a){return b.attr("x-data-"+a)||b.attr("data-"+a)||b.attr(a)},d=c("title");d||b.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");var f=b.attr("ng-if");f||b.attr("ng-if","$columns[$index].show(this)")}),function(a,b,c,d){var e=d.parseNgTableDynamicExpr(c.ngTableDynamic);d.setupBindingsToInternalScope(e.tableParams),d.compileDirectiveTemplates(),a.$watchCollection(e.columns,function(b){a.$columns=d.buildColumns(b),d.loadFilterData(a.$columns)})}):void 0}}}var e=c(0);d.$inject=[],b.ngTableDynamic=d},function(a,b,c){"use strict";function d(){function a(){b()}function b(){f=g}function c(a){var b=e.extend({},f,a);b.aliasUrls=e.extend({},f.aliasUrls,a.aliasUrls),f=b}function d(){function a(a,b){var c;return c="string"!=typeof a?a.id:a,-1!==c.indexOf("/")?c:d.getUrlForAlias(c,b)}function b(a,b){return f.aliasUrls[a]||f.defaultBaseUrl+a+f.defaultExt}var c,d={config:c,getTemplateUrl:a,getUrlForAlias:b};return Object.defineProperty(d,"config",{get:function(){return c=c||e.copy(f)},enumerable:!0}),d}var f,g={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};this.$get=d,this.resetConfigs=b,this.setConfig=c,a(),d.$inject=[]}var e=c(0);d.$inject=[],b.ngTableFilterConfigProvider=d},function(a,b,c){"use strict";function d(){var a={restrict:"E",replace:!0,templateUrl:e,scope:!0,controller:"ngTableFilterRowController"};return a}var e=c(24);d.$inject=[],b.ngTableFilterRow=d},function(a,b){"use strict";function c(a,b){a.config=b,a.getFilterCellCss=function(a,b){if("horizontal"!==b)return"s12";var c=Object.keys(a).length,d=parseInt((12/c).toString(),10);return"s"+d},a.getFilterPlaceholderValue=function(a,b){return"string"==typeof a?"":a.placeholder}}c.$inject=["$scope","ngTableFilterConfig"],b.ngTableFilterRowController=c},function(a,b,c){"use strict";function d(){var a={restrict:"E",replace:!0,templateUrl:e,scope:!0,controller:"ngTableGroupRowController",controllerAs:"dctrl"};return a}var e=c(29);d.$inject=[],b.ngTableGroupRow=d},function(a,b){"use strict";function c(a){function b(){a.getGroupables=f,a.getGroupTitle=e,a.getVisibleColumns=g,a.groupBy=h,a.isSelectedGroup=j,a.toggleDetail=l,a.$watch("params.group()",k,!0)}function c(){var b;b=a.params.hasGroup(a.$selGroup,"asc")?"desc":a.params.hasGroup(a.$selGroup,"desc")?"":"asc",a.params.group(a.$selGroup,b)}function d(b){return a.$columns.filter(function(c){return c.groupable(a)===b})[0]}function e(b){return i(b)?b.title:b.title(a)}function f(){var b=a.$columns.filter(function(b){return!!b.groupable(a)});return m.concat(b)}function g(){return a.$columns.filter(function(b){return b.show(a)})}function h(b){j(b)?c():i(b)?a.params.group(b):a.params.group(b.groupable(a))}function i(a){return"function"==typeof a}function j(b){return i(b)?b===a.$selGroup:b.groupable(a)===a.$selGroup}function k(b){var c=d(a.$selGroup);if(c&&c.show.assign&&c.show.assign(a,!0),i(b))m=[b],a.$selGroup=b,a.$selGroupTitle=b.title;else{var e=Object.keys(b||{})[0],f=d(e);f&&(a.$selGroupTitle=f.title(a),a.$selGroup=e,f.show.assign&&f.show.assign(a,!1))}}function l(){return a.params.settings().groupOptions.isExpanded=!a.params.settings().groupOptions.isExpanded,a.params.reload()}var m=[];b()}c.$inject=["$scope"],b.ngTableGroupRowController=c},function(a,b,c){"use strict";function d(a,b,c){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(d,f){c.onAfterReloadData(function(a){d.pages=a.generatePagesArray()},d,function(a){return a===d.params}),d.$watch("templateUrl",function(c){if(void 0!==c){var g=e.element('<div ng-include="templateUrl"></div>',b);f.append(g),a(g)(d)}})}}}var e=c(0);d.$inject=["$compile","$document","ngTableEventsChannel"],b.ngTablePagination=d},function(a,b){"use strict";function c(){var a={restrict:"A",controller:d};return a}function d(a,b,c,d){function e(){i=b(c.ngTableSelectFilterDs)(a),a.$watch(function(){return i&&i.data},f)}function f(){h(i).then(function(b){b&&!g(b)&&b.unshift({id:"",title:""}),b=b||[],a.$selectData=b})}function g(a){for(var b,c=0;c<a.length;c++){var d=a[c];if(d&&""===d.id){b=!0;break}}return b}function h(a){var b=a.data;return b instanceof Array?d.when(b):d.when(b&&b())}var i;e()}c.$inject=[],b.ngTableSelectFilterDs=c,d.$inject=["$scope","$parse","$attrs","$q"]},function(a,b,c){"use strict";function d(){var a={restrict:"E",replace:!0,templateUrl:e,scope:!0,controller:"ngTableSorterRowController"};return a}var e=c(32);d.$inject=[],b.ngTableSorterRow=d},function(a,b){"use strict";function c(a){function b(b,c){var d=b.sortable&&b.sortable();if(d&&"string"==typeof d){var e=a.params.settings().defaultSort,f="asc"===e?"desc":"asc",g=a.params.sorting()&&a.params.sorting()[d]&&a.params.sorting()[d]===e,h=c.ctrlKey||c.metaKey?a.params.sorting():{};h[d]=g?f:e,a.params.parameters({sorting:h})}}a.sortBy=b}c.$inject=["$scope"],b.ngTableSorterRowController=c},function(a,b){"use strict"},function(a,b,c){"use strict";var d=c(0),e=function(){function a(){function a(a){function c(c){var e=c.settings().filterOptions;return d.isFunction(e.filterFn)?e.filterFn:a(e.filterFilterName||b.filterFilterName)}function e(c){return a(b.sortingFilterName)}function f(a,b){if(!b.hasFilter())return a;var d=b.filter(!0),e=Object.keys(d),f=e.reduce(function(a,b){return a=j(a,d[b],b)},{}),g=c(b);return g.call(b,a,f,b.settings().filterOptions.filterComparator)}function g(a,b){var c=a.slice((b.page()-1)*b.count(),b.page()*b.count());return b.total(a.length),c}function h(a,b){var c=b.orderBy(),d=e(b);return c.length?d(a,c):a}function i(a,b){if(null==a)return[];var c=d.extend({},k,b.settings().dataOptions),e=c.applyFilter?f(a,b):a,i=c.applySort?h(e,b):e;return c.applyPaging?g(i,b):i}function j(a,b,c){var d=c.split("."),e=a,f=d[d.length-1],g=e,h=d.slice(0,d.length-1);return h.forEach(function(a){g.hasOwnProperty(a)||(g[a]={}),g=g[a]}),g[f]=b,e}var k={applyFilter:!0,applySort:!0,applyPaging:!0};return i.applyPaging=g,i.getFilterFn=c,i.getOrderByFn=e,i}this.filterFilterName="filter",this.sortingFilterName="orderBy";var b=this;this.$get=a,a.$inject=["$filter"]}return a}();b.ngTableDefaultGetDataProvider=e},function(a,b){"use strict";b.ngTableDefaults={params:{},settings:{}}},function(a,b,c){"use strict";function d(a){function b(a,b){var f=a.charAt(0).toUpperCase()+a.substring(1),g=(h={},h["on"+f]=c(a),h["publish"+f]=d(a),h);return e.extend(b,g);var h}function c(b){function c(a){return a?d(a)?a:function(b){return b===a}:function(a){return!0}}function d(a){return"function"==typeof a}function e(a){return a&&"function"==typeof a.$new}return function(d,f,g){var h,i=a;return e(f)?(i=f,h=c(g)):h=c(f),i.$on("ngTable:"+b,function(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];if(!b.isNullInstance){var f=[b].concat(c);h.apply(this,f)&&d.apply(this,f)}})}}function d(b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];a.$broadcast.apply(a,["ngTable:"+b].concat(c))}}var f={};return f=b("afterCreated",f),f=b("afterReloadData",f),f=b("datasetChanged",f),f=b("pagesChanged",f)}var e=c(0);d.$inject=["$rootScope"],b.ngTableEventsChannel=d},function(a,b,c){"use strict";function d(a,b,c,d,f,g){function h(c,h){function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a){var b=B.groupOptions&&B.groupOptions.defaultSort;if(a){if(m(a))return null==a.sortDirection&&(a.sortDirection=b),a;if("object"==typeof a){for(var c in a)null==a[c]&&(a[c]=b);return a}return d={},d[a]=b,d}return a;var d}function k(a){var b=[];for(var c in a)b.push(("asc"===a[c]?"+":"-")+c);return b}function l(){var a=A.group;return{params:A,groupSortDirection:m(a)?a.sortDirection:void 0}}function m(a){return"function"==typeof a}function n(){var a=A.filter&&A.filter.$,b=r&&r.params.filter&&r.params.filter.$;return!e.equals(a,b)}function o(){B.filterOptions.filterDelay===x.filterDelay&&B.total<=B.filterOptions.filterDelayThreshold&&B.getData===z.getData&&(B.filterOptions.filterDelay=0)}function p(b){var c=B.interceptors||[];return c.reduce(function(b,c){var d=c.response&&c.response.bind(c)||a.when,e=c.responseError&&c.responseError.bind(c)||a.reject;return b.then(function(a){return d(a,t)},function(a){return e(a,t)})},b)}function q(){function b(a){return f(a.settings().dataset,a)}function c(b){var c,g=b.group(),h=void 0;if(m(g))c=g,h=g.sortDirection;else{var i=Object.keys(g)[0];h=g[i],c=function(a){return d(a,i)}}var j=b.settings(),l=j.dataOptions;j.dataOptions={applyPaging:!1};var n=j.getData,o=a.when(n(b));return o.then(function(a){var d={};e.forEach(a,function(a){var b=c(a);d[b]=d[b]||{data:[],$hideRows:!j.groupOptions.isExpanded,value:b},d[b].data.push(a)});var g=[];for(var i in d)g.push(d[i]);if(h){var l=f.getOrderByFn(),m=k({value:h});g=l(g,m)}return f.applyPaging(g,b)})["finally"](function(){j.dataOptions=l})}function d(a,b){var c;if(c="string"==typeof b?b.split("."):b,void 0!==a){if(0===c.length)return a;if(null!==a)return d(a[c[0]],c.slice(1))}}return{getData:b,getGroups:c}}"boolean"==typeof c&&(this.isNullInstance=!0);var r,s,t=this,u=!1,v=[],w=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];B.debugMode&&b.debug&&b.debug.apply(b,a)},x={filterComparator:void 0,filterDelay:500,filterDelayThreshold:1e4,filterFilterName:void 0,filterFn:void 0,filterLayout:"stack"},y={defaultSort:"asc",isExpanded:!0},z=q();this.data=[],this.parameters=function(a,b){if(b=b||!1,void 0!==typeof a){for(var c in a){var d=a[c];if(b&&c.indexOf("[")>=0){for(var f=c.split(/\[(.*)\]/).reverse(),g="",h=0,k=f.length;k>h;h++){var l=f[h];if(""!==l){var m=d;d={},d[g=l]=i(m)?parseFloat(m):m}}"sorting"===g&&(A[g]={}),A[g]=e.extend(A[g]||{},d[g])}else"group"===c?A[c]=j(a[c]):A[c]=i(a[c])?parseFloat(a[c]):a[c]}return w("ngTable: set parameters",A),this}return A},this.settings=function(a){if(e.isDefined(a)){a.filterOptions&&(a.filterOptions=e.extend({},B.filterOptions,a.filterOptions)),a.groupOptions&&(a.groupOptions=e.extend({},B.groupOptions,a.groupOptions)),e.isArray(a.dataset)&&(a.total=a.dataset.length);var b=B.dataset;B=e.extend(B,a),e.isArray(a.dataset)&&o();var c=a.hasOwnProperty("dataset")&&a.dataset!=b;if(c){u&&this.page(1),u=!1;var d=function(){g.publishDatasetChanged(t,a.dataset,b)};v?v.push(d):d()}return w("ngTable: set settings",B),this}return B},this.page=function(a){return void 0!==a?this.parameters({page:a}):A.page},this.total=function(a){return void 0!==a?this.settings({total:a}):B.total},this.count=function(a){return void 0!==a?this.parameters({count:a,page:1}):A.count},this.filter=function(a){if(null!=a&&"object"==typeof a)return this.parameters({filter:a,page:1});if(a===!0){for(var b=Object.keys(A.filter),c={},d=0;d<b.length;d++){var e=A.filter[b[d]];null!=e&&""!==e&&(c[b[d]]=e)}return c}return A.filter},this.group=function(a,b){if(void 0===a)return A.group;var c={page:1};return m(a)&&void 0!==b?(a.sortDirection=b,
c.group=a):"string"==typeof a&&void 0!==b?c.group=(d={},d[a]=b,d):c.group=a,this.parameters(c),this;var d},this.sorting=function(a,b){return"string"==typeof a&&void 0!==b?(this.parameters({sorting:(c={},c[a]=b,c)}),this):void 0!==a?this.parameters({sorting:a}):A.sorting;var c},this.isSortBy=function(a,b){return void 0!==b?void 0!==A.sorting[a]&&A.sorting[a]==b:void 0!==A.sorting[a]},this.orderBy=function(){return k(A.sorting)},this.generatePagesArray=function(a,b,c,d){arguments.length||(a=this.page(),b=this.total(),c=this.count());var e,f,g,h;d=d&&6>d?6:d;var i=[];if(h=Math.ceil(b/c),h>1){i.push({type:"prev",number:Math.max(1,a-1),active:a>1}),i.push({type:"first",number:1,active:a>1,current:1===a}),f=Math.round((B.paginationMaxBlocks-B.paginationMinBlocks)/2),g=Math.max(2,a-f),e=Math.min(h-1,a+2*f-(a-g)),g=Math.max(2,g-(2*f-(e-g)));for(var j=g;e>=j;)j===g&&2!==j||j===e&&j!==h-1?i.push({type:"more",active:!1}):i.push({type:"page",number:j,active:a!==j,current:a===j}),j++;i.push({type:"last",number:h,active:a!==h,current:a===h}),i.push({type:"next",number:Math.min(h,a+1),active:h>a})}return i},this.isDataReloadRequired=function(){return!u||!e.equals(l(),r)||n()},this.hasFilter=function(){return Object.keys(this.filter(!0)).length>0},this.hasGroup=function(a,b){return null==a?m(A.group)||Object.keys(A.group).length>0:m(a)?null==b?A.group===a:A.group===a&&a.sortDirection===b:null==b?-1!==Object.keys(A.group).indexOf(a):A.group[a]===b},this.hasFilterChanges=function(){var a=r&&r.params.filter;return!e.equals(A.filter,a)||n()},this.url=function(a){function b(a,b){c(f)?f.push(b+"="+encodeURIComponent(a)):f[b]=encodeURIComponent(a)}function c(b){return a}function d(a,b){return"group"===b||void 0!==typeof a&&""!==a}a=a||!1;var f=a?[]:{};for(var g in A)if(A.hasOwnProperty(g)){var h=A[g],i=encodeURIComponent(g);if("object"==typeof h){for(var j in h)if(d(h[j],g)){var k=i+"["+encodeURIComponent(j)+"]";b(h[j],k)}}else!e.isFunction(h)&&d(h,g)&&b(h,i)}return f},this.reload=function(){var b=this,c=null;if(B.$loading=!0,r=e.copy(l()),u=!0,b.hasGroup())c=p(a.when(B.getGroups(b)));else{var d=B.getData;c=p(a.when(d(b)))}w("ngTable: reload data");var f=b.data;return c.then(function(a){return B.$loading=!1,s=null,b.data=a,g.publishAfterReloadData(b,a,f),b.reloadPages(),a})["catch"](function(b){return s=r,a.reject(b)})},this.hasErrorState=function(){return!(!s||!e.equals(s,l()))},this.reloadPages=function(){var a;return function(){var b=a,c=t.generatePagesArray(t.page(),t.total(),t.count());e.equals(b,c)||(a=c,g.publishPagesChanged(this,c,b))}}();var A={page:1,count:10,filter:{},sorting:{},group:{}};e.extend(A,d.params);var B={$loading:!1,dataset:null,total:0,defaultSort:"desc",filterOptions:e.copy(x),groupOptions:e.copy(y),counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span"};return this.settings(z),this.settings(d.settings),this.settings(h),this.parameters(c,!0),g.publishAfterCreated(this),e.forEach(v,function(a){a()}),v=null,this}return h}var e=c(0);d.$inject=["$q","$log","$filter","ngTableDefaults","ngTableDefaultGetData","ngTableEventsChannel"],b.ngTableParamsFactory=d},18,function(a,b,c){var d="ng-table/filterRow.html",e='<tr ng-show=show_filter class=ng-table-filters> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if=$column.show(this) class="filter {{$column.class(this)}}" ng-class="params.settings().filterOptions.filterLayout === \'horizontal\' ? \'filter-horizontal\' : \'\'"> <div ng-repeat="(name, filter) in $column.filter(this)" ng-include=config.getTemplateUrl(filter) class=filter-cell ng-class="[getFilterCellCss($column.filter(this), params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\']"> </div> </th> </tr> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/filters/number.html",e='<input type=number name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/filters/select-multiple.html",e='<select ng-options="data.id as data.title for data in $column.data" ng-disabled=$filterRow.disabled multiple=multiple ng-multiple=true ng-model=params.filter()[name] class="filter filter-select-multiple form-control" name={{name}}> </select> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/filters/select.html",e='<select ng-options="data.id as data.title for data in $selectData" ng-table-select-filter-ds=$column ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="filter filter-select form-control" name={{name}}> <option style=display:none value=""></option> </select> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/filters/text.html",e='<input type=text name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/groupRow.html",e='<tr ng-if=params.hasGroup() ng-show=$groupRow.show class=ng-table-group-header> <th colspan={{getVisibleColumns().length}} class=sortable ng-class="{\n                    \'sort-asc\': params.hasGroup($selGroup, \'asc\'),\n                    \'sort-desc\':params.hasGroup($selGroup, \'desc\')\n                  }"> <a href="" ng-click="isSelectorOpen = !isSelectorOpen" class=ng-table-group-selector> <strong class=sort-indicator>{{$selGroupTitle}}</strong> <button class="btn btn-default btn-xs ng-table-group-close" ng-click="$groupRow.show = false; $event.preventDefault(); $event.stopPropagation();"> <span class="glyphicon glyphicon-remove"></span> </button> <button class="btn btn-default btn-xs ng-table-group-toggle" ng-click="toggleDetail(); $event.preventDefault(); $event.stopPropagation();"> <span class=glyphicon ng-class="{\n                    \'glyphicon-resize-small\': params.settings().groupOptions.isExpanded,\n                    \'glyphicon-resize-full\': !params.settings().groupOptions.isExpanded\n                }"></span> </button> </a> <div class=list-group ng-if=isSelectorOpen> <a href="" class=list-group-item ng-repeat="group in getGroupables()" ng-click=groupBy(group)> <strong>{{ getGroupTitle(group)}}</strong> <strong ng-class="isSelectedGroup(group) && \'sort-indicator\'"></strong> </a> </div> </th> </tr> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/header.html",e="<ng-table-group-row></ng-table-group-row> <ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> ",f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/pager.html",e='<div class="ng-cloak ng-table-pager" ng-if=params.data.length> <div ng-if=params.settings().counts.length class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type=button ng-class="{\'active\':params.count() == count}" ng-click=params.count(count) class="btn btn-default"> <span ng-bind=count></span> </button> </div> <ul ng-if=pages.length class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch=page.type> <a ng-switch-when=prev ng-click=params.page(page.number) href="">&laquo;</a> <a ng-switch-when=first ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a ng-switch-when=page ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a ng-switch-when=more ng-click=params.page(page.number) href="">&#8230;</a> <a ng-switch-when=last ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a ng-switch-when=next ng-click=params.page(page.number) href="">&raquo;</a> </li> </ul> </div> ',f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){var d="ng-table/sorterRow.html",e="<tr class=ng-table-sort-header> <th title={{$column.headerTitle(this)}} ng-repeat=\"$column in $columns\" ng-class=\"{\n                    'sortable': $column.sortable(this),\n                    'sort-asc': params.sorting()[$column.sortable(this)]=='asc',\n                    'sort-desc': params.sorting()[$column.sortable(this)]=='desc'\n                  }\" ng-click=\"sortBy($column, $event)\" ng-if=$column.show(this) ng-init=\"template = $column.headerTemplateURL(this)\" class=\"header {{$column.class(this)}}\"> <div ng-if=!template class=ng-table-header ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'div'}\"> <span ng-bind=$column.title(this) ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'span'}\"></span> </div> <div ng-if=template ng-include=template></div> </th> </tr> ",f=c(0);f.module("ng").run(["$templateCache",function(a){a.put(d,e)}]),a.exports=d},function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}var e=c(0),f=c(2),g=c(1),h=e.module("ngTable",[f["default"].name,g["default"].name]);b.ngTable=h,d(c(2)),d(c(1))}]))}),angular.module("obrasMduytApp").run(["$templateCache",function(a){"use strict";a.put("views/buscador.html",'<div ng-show="loading" class="row"> <div class="col-sm-12"> <h1 id="loading" class="text-center">{{ i18n.loading }}</h1> <p class="text-center"><img src="images/loader.75526f36.gif"></p> <hr> </div> </div> <div ng-if="!loading"> <div class="row"> <table id="buscador-table" ng-table-dynamic="tableParams with cols" class="table table-responsive"> <tr ng-repeat="row in $data"> </tr> </table> </div> <div class="row"> <h2 ng-show="results.length==0" class="text-center">{{ i18n.noResults }}</h2> <div class="col-sm-12 well resultado-buscador" ng-repeat="o in results"> <div class="row"> <div class="col-sm-3"> <img ng-show="o.imagen_1" ng-src="{{o.imagen_1}}" class="img-responsive"> <img ng-hide="o.imagen_1" ng-src="http://placehold.it/400x300" class="img-responsive"> </div> <div class="col-sm-9"> <div class="row"> <div class="col-sm-6"> <span class="title">{{ i18n.plannedWork }}:</span> <span class="desc">{{o.nombre}}</span> </div> <div class="col-sm-3" ng-if="o.licitacion_oferta_empresa"> <span class="title">{{ i18n.company }}:</span> <span class="desc">{{o.licitacion_oferta_empresa}}</span> </div> <div class="col-sm-3" ng-if="o.monto_contrato"> <span class="title">{{ i18n.investmentAmount }}:</span> <span class="desc">{{o.monto_contrato | currency}}</span> </div> </div> <div class="row"> <div class="col-sm-12"> <span class="title">{{ i18n.description }}:</span> <span class="desc">{{o.descripcion}}</span> </div> </div> <div class="row"> <div class="col-sm-2" ng-if="o.area_responsable"> <span class="title">{{ i18n.responsableArea }}:</span> <span class="desc">{{o.area_responsable}}</span> </div> <div class="col-sm-2" ng-if="o.tipo"> <span class="title">{{ i18n.type }}:</span> <span class="desc">{{o.tipo}}</span> </div> <div class="col-sm-2" ng-if="o.comuna"> <span class="title">{{ i18n.commune }}:</span> <span class="desc">{{ i18n.commune }} {{o.comuna}}</span> </div> <div class="col-sm-2" ng-if="o.etapa"> <span class="title">{{ i18n.stage }}:</span> <span class="desc">{{o.etapa}}</span> </div> <div class="col-sm-3 col-sm-offset-1"> <a ng-show="o.link_interno" ng-href="{{o.link_interno}}" target="_parent" class="btn btn-default btn-block">{{ i18n.moreInformation }}</a> </div> </div> </div> </div> </div> </div> <div class="row"> <div id="footer" class="col-sm-12"> </div> </div> </div>'),a.put("views/directives/youtubePlayer.html",'<div class="detalle-frame {{class}}"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <a class="yt-switch" href="javascript:;" ng-click="ytSwitch=true;" ng-hide="ytSwitch" ng-style="{\'background-image\':\'url(\'+ytThumbnail+\')\'}"> <img class="img-responsive" src="images/play.png"> </a> <ng-youtube-embed ng-if="ytSwitch" url="url" playauto="true" color="white" disablekb="true" width="100%" height="300px" rel="false" theme="light" modestbranding="1"> </ng-youtube-embed> </div>'),a.put("views/entorno.html",'<div ng-show="loading" class="row"> <div class="col-sm-12"> <h1 id="loading" class="text-center">{{ i18n.loading }}</h1> <p class="text-center"><img src="images/loader.75526f36.gif"></p> <hr> </div> </div> <div ng-if="!loading"> <div class="row"> <div class="col-md-12"> <h2>{{ i18n.environment }}: {{obras[0].entorno}}</h2> <div ng-repeat="obra in obras"> <!-- Obra: {{$index+1}} -> {{obra}} --> <div ng-include="\'views/includes/obra-detail.html\'"></div> </div> </div> </div> <div class="row"> <div class="col-md-12"> <h4>{{ i18n.mapLocation }}</h4> <leaflet center="center" tiles="tiles" markers="markers" defaults="defaults" width="100%" height="350px"></leaflet> </div> </div> </div>'),a.put("views/home.html",'<div ng-show="loading" class="row"> <div class="col-sm-12"> <h1 id="loading" class="text-center">{{ i18n.loading }}</h1> <p class="text-center"><img src="images/loader.75526f36.gif"></p> <hr> </div> </div> <div ng-if="!loading"> <div class="row"> <div class="col-sm-12"> <stats-home obras="obras"></stats-home> </div> </div> <div class="hidden-xs"> <selector-home ng-if="availableGroups.length > 1" list="availableGroups" selected-group="selectedGroup" update-fn="changeGroup(group)"></selector-home> </div> <div class="row hidden-xs"> <div class="col-sm-12"> <tipo-chart labels="labels" obras="obras" selected-filter="selectedFilter" filter-fn="filterBubbles(filter)" tipo-colors="tipo_colors" finish-fn="tipoChartFinished()"></tipo-chart> </div> </div> <div class="row hidden-xs"> <div class="col-sm-12"> <area-responsable-chart obras="obras" selected-filter="selectedFilter" filter-fn="filterBubbles(filter)"></area-responsable-chart> </div> </div> <div class="row"> <div class="col-sm-12"> <h1 class="hidden-xs"> <strong>{{ useComunas ? "Conocé las obras de tu comuna" : i18n.mapTitle }}</strong></h1> <h1 class="visible-xs"> <strong>{{ useComunas ? " Tocá una comuna para conocer las obras" : i18n.mobileMapTitle }}</strong></h1> </div> </div> <div class="row hidden-xs"> <div class="col-md-12"> <div id="search-box" class="row chart-item"> <div class="col-md-2 hidden-xs"> <h4>{{ i18n.searchBy }}</h4> </div> <div class="col-xs-12 col-md-8 search"> <input ng-model="textFilter" ng-change="filterByText()" class="form-control text-filter" type="text" placeholder="Filtra por nombre o descripcion de obra"> </div> </div> </div> </div> <div id="main-chart-container" class="row"> <div class="hidden-xs col-sm-12"> <a ng-click="filterBubbles(\'destacada\')" class="btn btn btn-secondary btn-sm show-destacadas"><i class="glyphicon glyphicon-flag"></i>{{ i18n.featuredWorks }}</a> <p> </p> <p> </p> </div> </div> <div class="col-sm-12 home-chart-main"> <div id="home-chart-container"></div> </div> </div> <div id="mobile-filler" class="row"> </div>  <!-- Tooltip OBRAS --> <div id="tooltip-home-chart"> <button type="button" class="close pull-right" ng-click="closeTooltip()">&times;</button> <div class="row"> <div class="col-xs-12"> <div id="tooltip-logo-container" class="pull-left"></div> <div class="tooltip-title"> <span class="type" ng-style="{color: selectedObra.color_tipo_obra}">{{selectedObra.data.tipo}}</span> <span class="title">{{selectedObra.data.nombre}}</span> </div> </div> </div> <div class="tooltip-img" ng-show="tooltipThumb"> <img class="obra-pic img-responsive" ng-src="{{tooltipThumb}}"> </div> <div class="row"> <div class="col-xs-12"> <div ng-show="selectedObra.data.porcentaje_avance" class="progress"> <span class="desc">{{selectedObra.data.etapa}}<span ng-show="selectedObra.data.porcentaje_avance">: {{selectedObra.data.porcentaje_avance}}%</span></span> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': selectedObra.data.porcentaje_avance + \'%\' }"> <i ng-show="selectedObra.data.porcentaje_avance == 100" class="glyphicon glyphicon-ok"></i> </div> <div class="progress-w" ng-show="selectedObra.data.porcentaje_avance<22" ng-style="{ \'width\': (100 - selectedObra.data.porcentaje_avance) + \'%\' }"></div> </div> </div> </div> <div class="hidden-xs"> <div class="row tooltip-text" ng-show="selectedObra.data.area_responsable"> <div class="col-xs-2"> <img src="images/iconos/ministerio.svg"> </div> <div class="col-xs-10"> <p class="tooltip-text">{{selectedObra.data.area_responsable}}</p> </div> </div> <p class="tooltip-text tooltip-map" ng-show="showObraImg"> <span class="tooltip-map-loading" ng-show="!selectedObra.map"><small>{{ i18n.loading }}</small></span> <span class="tooltip-map-placeholder"> <img class="obra-pic img-responsive" ng-show="selectedObra.map" ng-src="{{selectedObra.map}}"> </span> </p> <div class="row tooltip-text" ng-show="selectedObra.data.direccion"> <div class="col-xs-2"> <img src="images/iconos/location.svg"> </div> <div class="col-xs-10"> <p class="tooltip-text">{{selectedObra.data.direccion}}<br>Comuna {{selectedObra.data.comuna}}</p> </div> </div> </div> <p class="tooltip-text" ng-show="selectedObra.data.link_interno"><a target="_parent" ng-href="{{selectedObra.data.link_interno}}" class="btn btn-link btn-xs btn-block btn-ver-mas">{{ i18n.seeMore }}</a></p> <div class="row compromiso-row" ng-show="selectedObra.data.compromiso"> <div class="col-xs-12"> <span class="label label-primary">{{ i18n.governmentCommitment }}</span> </div> </div> </div> <!-- TODO: adaptar todo lo siguiente --> <div ng-show="showList" class="row obra-list open-big"> <div class="grey-back col-xs-12"> <div class="row"> <h4 class="col-xs-10">{{ i18n.totalWorks }} {{ selectedComuna ? "Comuna " + selectedComuna : selectedJurisdiccion }}</h4> <h4 class="col-xs-2 right"><a href="" ng-click="closeList()"> <span class="ba-icon ba-no form-control-feedback"></span></a> </h4> </div> </div> <div class="light-grey-back col-xs-12" style="display: none"> <div class="row"> <div class="col-xs-2"> <p>Filtrar:</p> </div> <div class="col-xs-8"> <select class="input" ng-options="item as item.label for item in selectTypes track by item.slug" ng-model="obrasTypeFilter"></select> </div> </div> <div class="row"> <div class="col-xs-2"> <p></p> </div> <div class="col-xs-8"> <input ng-model="obrasListFilter" type="text" placeholder="Palabra Clave"> </div> </div> </div> <div class="detail col-xs-12" ng-repeat="o in filteredObras | filter:obrasListFilter || obrasTypeFilter.slug"> <div class="row full"> <div class="col-xs-4"> <img class="obra-pic img-responsive" ng-src="{{o.thumb}}"> </div> <div class="col-xs-8"> <div class="row"> <h5> {{o.nombre}} </h5> <p> {{o.descripcion | limitTo:250}}</p> <div class="row data"> <div class="col-xs-6 smaller"> <div class="row"> <div class="col-xs-5"><p>Monto:</p></div> <div class="col-xs-7"> {{o.monto_contrato | currency}}</div> </div> <div class="row"> <div class="col-xs-5"><p>Etapa:</p></div> <div class="col-xs-7">{{o.etapa}}</div> </div> </div> <div class="col-xs-6"> <p class="tooltip-text right" ng-show="o.link_interno"><a target="_parent" ng-href="{{o.link_interno}}" class="btn btn-link btn-xs btn-block btn-ver-mas">VER MÁS</a></p> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/includes/home-area.html",'<div id="area-responsable-chart" class="row chart-item" ng-show="total_obras_by_area.length"> <div class="col-md-2"><h4>{{ i18n.filterByGovernmentArea }}</h4></div> <div class="col-md-5"> <select ng-show="total_obras_by_area.length" id="areas" class="form-control" ng-model="selected"> <option value>{{ i18n.all }}</option> <option ng-repeat="option in total_obras_by_area" value="{{option.slug}}">{{option.area}}</option> </select> </div> <div class="col-md-5"> <div id="mini-chart" ng-class="{\'all\':selected==\'\'}"></div> <p ng-show="selectedCantidad">{{selectedCantidad}} {{ i18n.plannedWorks }} <span ng-show="selectedCantidad!=total">({{selectedCantidad*100/total | number:0}}% {{ i18n.ofTheTotal }})</span> </p></div> </div> '),a.put("views/includes/obra-detail.html",'<div class="row obra"> <div class="col-md-12"> <h3>{{ i18n.plannedWork }}: {{obra.nombre}}</h3> <div class="row"> <div class="col-md-8"> <ul> <flex-slider slide="s in obra.fotos" animation="slide" control-nav="thumbnails"> <li data-thumb="{{s}}"> <img ng-src="{{s}}"> </li> </flex-slider> </ul> <p> {{obra.descripcion}} </p> </div> <div class="col-md-3 ficha-tecnica" ng-if="obra.hasDetail"> <h4>{{ i18n.technicalInformation }}</h4> <p class="etiquetas"> <a href="http://www.buenosaires.gob.ar/compromisos" target="_blank>"><span ng-show="obra.compromiso" class="label label-primary compromiso-row compromiso"> <img src="images/iconos/compromiso.svg">{{ i18n.governmentCommitment }}</span></a> <span ng-show="obra.destacada" class="label label-primary compromiso-row destacada"> <img src="images/iconos/archivo.svg">{{ i18n.featuredWork }}</span> <a href="https://baelige.buenosaires.gob.ar/" target="_blank>"> <span ng-show="obra.ba_elige" class="label label-primary compromiso-row ba-elige"> <img src="images/iconos/archivo.svg">BA Elige</span></a> </p> <div class="etapa" ng-if="obra.etapa"> <div class="row"> <div class="col-md-2"> <img src="images/iconos/calendario.svg"> </div> <div class="col-md-10"> <p>{{ i18n.stage }}:</p> <p><strong>{{obra.etapa}}</strong> </p> <div class="progress" ng-if="obra.porcentaje_avance"> <div class="progress-bar bg-color-{{obra.slug}}" role="progressbar" ng-style="{ \'width\': obra.porcentaje_avance + \'%\' }"> <div class="progressbar-w" ng-show="!obra.porcentaje_avance"><p></p> </div> <span class="progressbar-w" ng-hide="obra.porcentaje_avance<22 || !obra.porcentaje_avance"> </span> </div> <div class="progress-w" ng-show="obra.porcentaje_avance<22" ng-style="{ \'width\': (100 - obra.porcentaje_avance) + \'%\' }"></div> </div> <div ng-if="!obra.hideDates" class="row fechas" ng-show="obra.fecha_inicio"> <div class="col-md-6" ng-show="obra.fecha_inicio"> <p> {{ i18n.start }}: <strong>{{obra.fecha_inicio}}</strong></p> </div> <div class="col-md-6" ng-show="obra.fecha_fin"> <p> {{ i18n.end }}: <strong>{{obra.fecha_fin}}</strong> </p> </div> </div> </div> </div> <div class="row" ng-if="obra.etapa_detalle"> <div class="col-md-2"> <p> </p> </div> <div class="col-md-10"> <p> <small> {{obra.etapa_detalle}}</small> </p> </div> </div> </div> <div class="row" ng-if="obra.tipo"> <div class="col-md-2"> <img src="images/iconos/estilo.svg"> </div> <div class="col-md-10"> <p>{{ i18n.workType }}: </p> <strong>{{obra.tipo}}</strong> </div> </div> <div class="row"> <div class="col-md-2"> <img src="images/iconos/ministerio.svg"> </div> <div class="col-md-10" ng-if="obra.area_responsable"> <p> {{ i18n.responsableArea }}: </p> <strong> {{obra.area_responsable}}</strong> </div> </div> <div class="row" ng-show="obra.licitacion_oferta_empresa"> <div class="col-md-2"> <img src="images/iconos/trabajador.svg"> </div> <div class="col-md-10"> <p> {{ i18n.company }}: </p> <strong> {{obra.licitacion_oferta_empresa}}</strong> <div ng-show="obra.cuit_contratista"> <p> CUIT Empresa: </p> <strong> {{obra.cuit_contratista}}</strong> </div> <div ng-show="obra.contratacion_tipo"> <p> {{ i18n.contractType }}: </p> <strong> {{obra.contratista_tipo}}</strong> </div> <div ng-show="obra.nro_contratacion"> <p> {{ i18n.contractNumber }}: </p> <strong> {{obra.nro_contratacion}}</strong> </div> </div> </div> <div class="row" ng-show="obra.plazo_meses" ng-if="obra.plazo_meses"> <div class="col-md-2"> <img src="images/iconos/relojarena.svg"> </div> <div class="col-md-10"> <p> {{ i18n.termDuration }}: </p> <strong> {{obra.plazo_meses}} {{ i18n.months }} </strong> </div> </div> <div class="row" ng-show="obra.hideDates && obra.licitacion_anio"> <div class="col-md-2"> <img src="images/iconos/calendario.svg"> </div> <div class="col-md-10"> <p>{{ i18n.yearOfTender }}: </p> <strong> {{obra.licitacion_anio}}</strong> </div> </div> <div class="row" ng-show="obra.beneficiarios" ng-if="obra.benficiarios"> <div class="col-md-2"> <img src="images/iconos/ministerio.svg"> </div> <div class="col-md-10"> <p>{{ i18n.numberOfBeneficiaries }}:</p> <strong> {{obra.benficiarios}}<small> {{ i18n.people }}</small> </strong> </div> </div> <div class="row" ng-show="obra.mano_obra" ng-if="obra.mano_obra"> <div class="col-md-2"> <img src="images/iconos/trabajador.svg"> </div> <div class="col-md-10"> <p>{{ i18n.workforce }}: </p> <strong> {{obra.mano_obra}} <small>{{ i18n.people }}</small> </strong> <colored-icons scale="\'manoDeObra\'" callback="drawSecondColored"></colored-icons> </div> </div> <div class="row" ng-show="obra.monto_contrato" ng-if="obra.monto_contrato"> <div class="col-md-2"> <img src="images/iconos/dinero.svg"> </div> <div class="col-md-10"> <p>{{ i18n.contractAmount }}: </p> <strong> {{obra.monto_contrato | currency}} </strong> </div> </div> <div class="row" ng-show="obra.direccion" ng-if="obra.direccion"> <div class="col-md-2"> <img src="images/iconos/location.svg"> </div> <div class="col-md-10"> <p> {{ i18n.address }}: </p> <strong> {{obra.direccion}} </strong> </div> </div> <div class="row" ng-show="obra.licitacion_presupuesto_oficial"> <div class="col-md-2"> <img src="images/iconos/dinero.svg"> </div> <div class="col-md-10"> <p>{{ i18n.updatedAmount }}: </p> <strong> {{obra.licitacion_presupuesto_oficial | currency}} </strong> </div> </div> <div class="row" ng-show="obra.financiamiento"> <div class="col-md-2"> <img src="images/iconos/dinero.svg"> </div> <div class="col-md-10"> <p>{{ i18n.financer }}:</p> <strong>{{obra.financiamiento}}</strong> </div> </div> <div class="row" ng-show="obra.pliego_descarga"> <div class="col-md-2"> <img src="images/iconos/archivo.svg"> </div> <div class="col-md-10"> <p><a ng-href="{{obra.pliego_descarga}}" target="_blank">{{ i18n.contractInformation }}</a> </p> </div> </div> <div class="row" ng-show="obra.estudio_ambiental_descarga"> <div class="col-md-2"> <img src="images/iconos/archivo.svg"> </div> <div class="col-md-10"> <p><a ng-href="{{obra.estudio_ambiental_descarga}}" target="_blank">{{ i18n.environmentalImpact }}</a> </p> </div> </div> </div> </div> </div> </div>'),a.put("views/includes/stats-home.html",'<div> <div class="row" ng-show="obras"> <div class="col-xs-12"> <h1 class="center">{{ i18n.homeTitle }}</h1> </div> </div> <div id="stats-home" class="row" ng-show="obras"> <div class="col-xs-12"> <div class="row"> <div class="col-xs-6"> <div class="row"> <div class="col-xs-3 col-md-4 icon-container"> <img class="" src="images/indicadores/inversion.svg"> </div> <div class="col-xs-9 col-md-8 value-container"> <h5>{{ i18n.investmentAmount }}:</h5> <span class="value">{{totalRender.inversion | currency:$ :0}}</span> </div> </div> </div> <div class="col-xs-6"> <div class="row"> <div class="col-xs-3 col-md-4 icon-container"> <img class="" src="images/indicadores/obras.svg"> </div> <div class="col-xs-9 col-md-8 value-container"> <h5>{{ i18n.totalWorks }}:</h5> <span class="value">{{totalRender.obras | number:0}}</span> </div> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <div class="row"> <div class="col-xs-3 col-md-4 icon-container"> <img class="" src="images/indicadores/finalizadas.svg"> </div> <div class="col-xs-9 col-md-8 value-container"> <h5>{{ i18n.ended }}:</h5> <span class="value">{{totalRender.porcentaje_finalizadas | number:0}}%</span> </div> </div> </div> <div class="col-xs-6"> <div class="row"> <div class="col-xs-3 col-md-4 icon-container"> <img class="" src="images/indicadores/personas.svg"> </div> <div class="col-xs-9 col-md-8 value-container"> <h5>{{ i18n.employees }}:</h5> <span class="value">{{totalRender.mano_obra | number:0}}</span> </div> </div> </div> </div> </div> </div> </div>'),a.put("views/includes/youtubePlayer.html",'<div class="detalle-frame {{class}}"> <p class="detalle-frame-title text-left" ng-if="title">{{title}} </p> <i ng-if="nota || fuente" class="detalle-frame-icon glyphicon glyphicon-info-sign" data-container="body" title="{{nota}}" data-toggle="popover" data-placement="bottom" data-content="Fuente: {{fuente}}"> </i> <span ng-show="loading">Cargando...</span> <a class="yt-switch" href="javascript:;" ng-click="ytSwitch=true;" ng-hide="ytSwitch" ng-style="{\'background-image\':\'url(\'+ytThumbnail+\')\'}"> <img class="img-responsive" src="images/play.png"> </a> <ng-youtube-embed ng-if="ytSwitch" url="url" playauto="true" color="white" disablekb="true" width="100%" height="300px" rel="false" theme="light" modestbranding="1"> </ng-youtube-embed> </div>'),a.put("views/obra.html",'<div ng-show="loading" class="row"> <div class="col-sm-12"> <h1 id="loading" class="text-center">{{ i18n.loading }}</h1> <p class="text-center"><img src="images/loader.75526f36.gif"></p> <hr> </div> </div> <div ng-if="!loading"> <div class="row obra"> <div class="col-xs-12"> <div class="row"> <div class="col-xs-12"> <div class="tooltip-title"> <div class="row"> <div class="col-xs-1"> <div class="inner"> <div id="tooltip-logo-container" class="icon pull-left" ng-style="{\'background-color\': tipo_colors(obra.tipo)}"> <img ng-src="images/iconos/{{obra.tipo_slug}}.svg"> </div> </div> </div> <div class="col-xs-10"> <p class="type" ng-style="{color: tipo_colors(obra.tipo)}">{{obra.tipo}}</p> <h3 class="title">{{obra.nombre}}</h3> </div> </div> </div> </div> </div> <div class="row"> <div class="col-md-8"> <ul> <flex-slider slide="s in obra.fotos" animation="slide" control-nav="thumbnails"> <li data-thumb="{{s}}"> <img ng-src="{{s}}"> </li> </flex-slider> </ul> <p> {{c.descripcion}} </p> </div> <div class="col-md-3 ficha-tecnica"> <h4>{{ i18n.technicalInformation }}</h4> <p class="etiquetas"> <a href="http://www.buenosaires.gob.ar/compromisos" target="_blank>"><span ng-show="obra.compromiso" class="label label-primary compromiso-row compromiso"> <img src="images/iconos/compromiso.svg">{{ i18n.governmentCommitment }}</span></a> <span ng-show="obra.destacada" class="label label-primary compromiso-row destacada"> <img src="images/iconos/archivo.svg">{{ i18n.featuredWork }}</span> <a href="https://baelige.buenosaires.gob.ar/" target="_blank>"> <span ng-show="obra.ba_elige" class="label label-primary compromiso-row ba-elige"> <img src="images/iconos/archivo.svg">BA Elige</span></a> </p> <div class="etapa"> <div class="row" ng-show="obra.etapa"> <div class="col-md-2"> <img src="images/iconos/calendario.svg"> </div> <div class="col-md-10"> <p>{{ i18n.stage }}:</p> <p><strong>{{obra.etapa}}</strong> </p> <div class="progress" ng-show="obra.porcentaje_avance"> <div class="progress-bar bg-color-{{obra.slug}}" role="progressbar" ng-style="{ \'width\': obra.porcentaje_avance + \'%\' }"> <div class="progressbar-w" ng-show="!obra.porcentaje_avance"> <p></p> </div> <span class="progressbar-w" ng-hide="obra.porcentaje_avance<22 || !obra.porcentaje_avance"></span> </div> <div class="progress-w" ng-show="obra.porcentaje_avance<22" ng-style="{ \'width\': (100 - obra.porcentaje_avance) + \'%\' }"> </div> </div> <div ng-if="!obra.hideDates" class="row fechas" ng-show="obra.fecha_inicio"> <div class="col-md-6" ng-show="obra.fecha_inicio"> <p> {{ i18n.start }}: <strong>{{obra.fecha_inicio}}</strong></p> </div> <div class="col-md-6" ng-show="obra.fecha_fin"> <p> {{ i18n.end }}: <strong>{{obra.fecha_fin}}</strong> </p> </div> </div> </div> </div> <div class="row"> <div class="col-md-2"> <p> </p> </div> <div class="col-md-10"> <p> <small> {{obra.etapa_detalle}}</small> </p> </div> </div> <div class="row" ng-show="obra.tipo"> <div class="col-md-2"> <img src="images/iconos/estilo.svg"> </div> <div class="col-md-10"> <p> {{ i18n.workType }}: </p> <strong>{{obra.tipo}}</strong> </div> </div> <div class="row" ng-show="obra.area_responsable"> <div class="col-md-2"> <img src="images/iconos/ministerio.svg"> </div> <div class="col-md-10"> <p> {{ i18n.responsableArea }}: </p> <strong> {{obra.area_responsable}}</strong> </div> </div> <div class="row" ng-show="obra.licitacion_oferta_empresa"> <div class="col-md-2"> <img src="images/iconos/trabajador.svg"> </div> <div class="col-md-10"> <p> {{ i18n.company }}: </p> <strong> {{obra.licitacion_oferta_empresa}}</strong> <div ng-show="obra.cuit_contratista"> <p> CUIT Empresa: </p> <strong> {{obra.cuit_contratista}}</strong> </div> <div ng-show="obra.contratacion_tipo"> <p> {{ i18n.contractType }}: </p> <strong> {{obra.contratista_tipo}}</strong> </div> <div ng-show="obra.nro_contratacion"> <p> {{ i18n.contractNumber }}: </p> <strong> {{obra.nro_contratacion}}</strong> </div> </div> </div> <div class="row" ng-show="obra.plazo_meses"> <div class="col-md-2"> <img src="images/iconos/relojarena.svg"> </div> <div class="col-md-10"> <p> {{ i18n.termDuration }}: </p> <strong> {{obra.plazo_meses}} {{ i18n.months }} </strong> </div> </div> <div class="row" ng-show="obra.hideDates && obra.licitacion_anio"> <div class="col-md-2"> <img src="images/iconos/calendario.svg"> </div> <div class="col-md-10"> <p>{{ i18n.yearOfTender }}:</p> <strong> {{obra.licitacion_anio}}</strong> </div> </div> <div class="row" ng-show="obra.beneficiarios"> <div class="col-md-2"> <img src="images/iconos/ministerio.svg"> </div> <div class="col-md-10"> <p>{{ i18n.numberOfBeneficiaries }}:</p> <strong> {{obra.benficiarios}}<small> {{ i18n.people }}</small> </strong> </div> </div> <div class="row" ng-show="obra.mano_obra"> <div class="col-md-2"> <img src="images/iconos/trabajador.svg"> </div> <div class="col-md-10"> <p>{{ i18n.workforce }}: </p> <strong> {{obra.mano_obra}} <small>{{ i18n.people }}</small> </strong> <colored-icons scale="\'manoDeObra\'" callback="drawSecondColored"></colored-icons> </div> </div> <div class="row" ng-show="obra.monto_contrato"> <div class="col-md-2"> <img src="images/iconos/dinero.svg"> </div> <div class="col-md-10"> <p>{{ i18n.contractAmount }}: </p> <strong> {{obra.monto_contrato | currency}} </strong> </div> </div> <div class="row" ng-show="obra.direccion"> <div class="col-md-2"> <img src="images/iconos/location.svg"> </div> <div class="col-md-10"> <p>{{ i18n.address }}: </p> <strong> {{obra.direccion}} </strong> </div> </div> <div class="row" ng-show="obra.licitacion_presupuesto_oficial"> <div class="col-md-2"> <img src="images/iconos/dinero.svg"> </div> <div class="col-md-10"> <p>{{ i18n.updatedAmount }}: </p> <strong> {{obra.licitacion_presupuesto_oficial | currency}} </strong> </div> </div> <div class="row" ng-show="obra.financiamiento"> <div class="col-md-2"> <img src="images/iconos/dinero.svg"> </div> <div class="col-md-10"> <p>{{ i18n.financer }}:</p> <strong>{{obra.financiamiento}}</strong> </div> </div> <div class="row" ng-show="obra.pliego_descarga"> <div class="col-md-2"> <img src="images/iconos/archivo.svg"> </div> <div class="col-md-10"> <p><a ng-href="{{obra.pliego_descarga}}" target="_blank">{{ i18n.contractInformation }}</a> </p> </div> </div> <div class="row" ng-show="obra.estudio_ambiental_descarga"> <div class="col-md-2"> <img src="images/iconos/archivo.svg"> </div> <div class="col-md-10"> <p><a ng-href="{{obra.estudio_ambiental_descarga}}" target="_blank">{{ i18n.environmentalImpact }}</a> </p> </div> </div> </div> <!-- etapa --> </div> <!-- ficha técnica --> </div> <!-- row --> <div class="row"> <div class="col-md-12"> <h4>{{ i18n.workLocation }} </h4> <leaflet center="center" tiles="tiles" markers="markers" defaults="defaults" width="100%" height="350px"></leaflet> </div> </div> </div><!-- col md 12 --> </div><!-- row obra --> </div><!-- if loading -->');
}]);